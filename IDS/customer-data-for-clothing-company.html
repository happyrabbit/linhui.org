<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>A.1 Customer Data for Clothing Company | Introduction to Data Science</title>
  <meta name="description" content="A.1 Customer Data for Clothing Company | Introduction to Data Science" />
  <meta name="generator" content="bookdown 0.15 and GitBook 2.6.7" />

  <meta property="og:title" content="A.1 Customer Data for Clothing Company | Introduction to Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://scientistcafe.com/IDS/" />
  
  <meta property="og:description" content="A.1 Customer Data for Clothing Company | Introduction to Data Science" />
  <meta name="github-repo" content="happyrabbit/IntroDataScience" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A.1 Customer Data for Clothing Company | Introduction to Data Science" />
  
  <meta name="twitter:description" content="A.1 Customer Data for Clothing Company | Introduction to Data Science" />
  

<meta name="author" content="Hui Lin and Ming Li" />


<meta name="date" content="2019-12-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-code-for-data-simulation.html"/>
<link rel="next" href="customer-satisfaction-survey-data-from-airline-company-1.html"/>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://scientistcafe.com">Homepage</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="goal-of-the-book.html"><a href="goal-of-the-book.html"><i class="fa fa-check"></i>Goal of the Book</a></li>
<li class="chapter" data-level="" data-path="who-this-book-is-for.html"><a href="who-this-book-is-for.html"><i class="fa fa-check"></i>Who This Book Is For</a></li>
<li class="chapter" data-level="" data-path="what-this-book-covers.html"><a href="what-this-book-covers.html"><i class="fa fa-check"></i>What This Book Covers</a></li>
<li class="chapter" data-level="" data-path="conventions.html"><a href="conventions.html"><i class="fa fa-check"></i>Conventions</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="blind-men-and-an-elephant.html"><a href="blind-men-and-an-elephant.html"><i class="fa fa-check"></i><b>1.1</b> Blind men and an elephant</a><ul>
<li class="chapter" data-level="1.1.1" data-path="blind-men-and-an-elephant.html"><a href="blind-men-and-an-elephant.html#data-science-roleskill-tracks"><i class="fa fa-check"></i><b>1.1.1</b> Data science role/skill tracks</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="what-should-data-science-do.html"><a href="what-should-data-science-do.html"><i class="fa fa-check"></i><b>1.2</b> What should data science do?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="what-should-data-science-do.html"><a href="what-should-data-science-do.html#lets-dream-big"><i class="fa fa-check"></i><b>1.2.1</b> Let’s dream big</a></li>
<li class="chapter" data-level="1.2.2" data-path="what-should-data-science-do.html"><a href="what-should-data-science-do.html#what-kind-of-questions-can-data-science-solve"><i class="fa fa-check"></i><b>1.2.2</b> What kind of questions can data science solve?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="structure-data-science-team.html"><a href="structure-data-science-team.html"><i class="fa fa-check"></i><b>1.3</b> Structure data science team</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="soft-skills-for-data-scientists.html"><a href="soft-skills-for-data-scientists.html"><i class="fa fa-check"></i><b>2</b> Soft Skills for Data Scientists</a><ul>
<li class="chapter" data-level="2.1" data-path="comparison-between-statistician-and-data-scientist.html"><a href="comparison-between-statistician-and-data-scientist.html"><i class="fa fa-check"></i><b>2.1</b> Comparison between Statistician and Data Scientist</a></li>
<li class="chapter" data-level="2.2" data-path="beyond-data-and-analytics.html"><a href="beyond-data-and-analytics.html"><i class="fa fa-check"></i><b>2.2</b> Beyond Data and Analytics</a></li>
<li class="chapter" data-level="2.3" data-path="three-pillars-of-knowledge.html"><a href="three-pillars-of-knowledge.html"><i class="fa fa-check"></i><b>2.3</b> Three Pillars of Knowledge</a></li>
<li class="chapter" data-level="2.4" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html"><i class="fa fa-check"></i><b>2.4</b> Data Science Project Cycle</a><ul>
<li class="chapter" data-level="2.4.1" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html#types-of-data-science-projects"><i class="fa fa-check"></i><b>2.4.1</b> Types of Data Science Projects</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html#at-the-planning-stage"><i class="fa fa-check"></i><b>2.4.2</b> At the Planning Stage</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html#at-the-modeling-stage"><i class="fa fa-check"></i><b>2.4.3</b> At the Modeling Stage</a></li>
<li class="chapter" data-level="2.4.4" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html#at-the-production-stage"><i class="fa fa-check"></i><b>2.4.4</b> At the Production Stage</a></li>
<li class="chapter" data-level="2.4.5" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html#summary"><i class="fa fa-check"></i><b>2.4.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html"><i class="fa fa-check"></i><b>2.5</b> Common Mistakes in Data Science</a><ul>
<li class="chapter" data-level="2.5.1" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html#problem-formulation-stage"><i class="fa fa-check"></i><b>2.5.1</b> Problem Formulation Stage</a></li>
<li class="chapter" data-level="2.5.2" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html#problem-planning-stage"><i class="fa fa-check"></i><b>2.5.2</b> Problem Planning Stage</a></li>
<li class="chapter" data-level="2.5.3" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html#modeling-stage"><i class="fa fa-check"></i><b>2.5.3</b> Modeling Stage</a></li>
<li class="chapter" data-level="2.5.4" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html#production-stage"><i class="fa fa-check"></i><b>2.5.4</b> Production Stage</a></li>
<li class="chapter" data-level="2.5.5" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html#summary-1"><i class="fa fa-check"></i><b>2.5.5</b> Summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-the-data.html"><a href="introduction-to-the-data.html"><i class="fa fa-check"></i><b>3</b> Introduction to The Data</a><ul>
<li class="chapter" data-level="3.1" data-path="customer-data-for-a-clothing-company.html"><a href="customer-data-for-a-clothing-company.html"><i class="fa fa-check"></i><b>3.1</b> Customer Data for A Clothing Company</a></li>
<li class="chapter" data-level="3.2" data-path="customer-satisfaction-survey-data-from-airline-company.html"><a href="customer-satisfaction-survey-data-from-airline-company.html"><i class="fa fa-check"></i><b>3.2</b> Customer Satisfaction Survey Data from Airline Company</a></li>
<li class="chapter" data-level="3.3" data-path="swinediseasedata.html"><a href="swinediseasedata.html"><i class="fa fa-check"></i><b>3.3</b> Swine Disease Breakout Data</a></li>
<li class="chapter" data-level="3.4" data-path="mnist-dataset.html"><a href="mnist-dataset.html"><i class="fa fa-check"></i><b>3.4</b> MNIST Dataset</a></li>
<li class="chapter" data-level="3.5" data-path="imdb-dataset.html"><a href="imdb-dataset.html"><i class="fa fa-check"></i><b>3.5</b> IMDB Dataset</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="big-data-cloud-platform.html"><a href="big-data-cloud-platform.html"><i class="fa fa-check"></i><b>4</b> Big Data Cloud Platform</a><ul>
<li class="chapter" data-level="4.1" data-path="power-of-cluster-of-computers.html"><a href="power-of-cluster-of-computers.html"><i class="fa fa-check"></i><b>4.1</b> Power of Cluster of Computers</a></li>
<li class="chapter" data-level="4.2" data-path="evolution-of-cluster-computing.html"><a href="evolution-of-cluster-computing.html"><i class="fa fa-check"></i><b>4.2</b> Evolution of Cluster Computing</a><ul>
<li class="chapter" data-level="4.2.1" data-path="evolution-of-cluster-computing.html"><a href="evolution-of-cluster-computing.html#hadoop"><i class="fa fa-check"></i><b>4.2.1</b> Hadoop</a></li>
<li class="chapter" data-level="4.2.2" data-path="evolution-of-cluster-computing.html"><a href="evolution-of-cluster-computing.html#spark"><i class="fa fa-check"></i><b>4.2.2</b> Spark</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="introduction-of-cloud-environment.html"><a href="introduction-of-cloud-environment.html"><i class="fa fa-check"></i><b>4.3</b> Introduction of Cloud Environment</a><ul>
<li class="chapter" data-level="4.3.1" data-path="introduction-of-cloud-environment.html"><a href="introduction-of-cloud-environment.html#open-account-and-create-a-cluster"><i class="fa fa-check"></i><b>4.3.1</b> Open Account and Create a Cluster</a></li>
<li class="chapter" data-level="4.3.2" data-path="introduction-of-cloud-environment.html"><a href="introduction-of-cloud-environment.html#r-notebook"><i class="fa fa-check"></i><b>4.3.2</b> R Notebook</a></li>
<li class="chapter" data-level="4.3.3" data-path="introduction-of-cloud-environment.html"><a href="introduction-of-cloud-environment.html#markdown-cells"><i class="fa fa-check"></i><b>4.3.3</b> Markdown Cells</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="leverage-spark-using-r-notebook.html"><a href="leverage-spark-using-r-notebook.html"><i class="fa fa-check"></i><b>4.4</b> Leverage Spark Using R Notebook</a></li>
<li class="chapter" data-level="4.5" data-path="databases-and-sql.html"><a href="databases-and-sql.html"><i class="fa fa-check"></i><b>4.5</b> Databases and SQL</a><ul>
<li class="chapter" data-level="4.5.1" data-path="databases-and-sql.html"><a href="databases-and-sql.html#history"><i class="fa fa-check"></i><b>4.5.1</b> History</a></li>
<li class="chapter" data-level="4.5.2" data-path="databases-and-sql.html"><a href="databases-and-sql.html#database-table-and-view"><i class="fa fa-check"></i><b>4.5.2</b> Database, Table and View</a></li>
<li class="chapter" data-level="4.5.3" data-path="databases-and-sql.html"><a href="databases-and-sql.html#basic-sql-statement"><i class="fa fa-check"></i><b>4.5.3</b> Basic SQL Statement</a></li>
<li class="chapter" data-level="4.5.4" data-path="databases-and-sql.html"><a href="databases-and-sql.html#advanced-topics-in-database"><i class="fa fa-check"></i><b>4.5.4</b> Advanced Topics in Database</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-pre-processing.html"><a href="data-pre-processing.html"><i class="fa fa-check"></i><b>5</b> Data Pre-processing</a><ul>
<li class="chapter" data-level="5.1" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>5.1</b> Data Cleaning</a></li>
<li class="chapter" data-level="5.2" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>5.2</b> Missing Values</a><ul>
<li class="chapter" data-level="5.2.1" data-path="missing-values.html"><a href="missing-values.html#impute-missing-values-with-medianmode"><i class="fa fa-check"></i><b>5.2.1</b> Impute missing values with median/mode</a></li>
<li class="chapter" data-level="5.2.2" data-path="missing-values.html"><a href="missing-values.html#k-nearest-neighbors"><i class="fa fa-check"></i><b>5.2.2</b> K-nearest neighbors</a></li>
<li class="chapter" data-level="5.2.3" data-path="missing-values.html"><a href="missing-values.html#bagging-tree"><i class="fa fa-check"></i><b>5.2.3</b> Bagging Tree</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="centering-and-scaling.html"><a href="centering-and-scaling.html"><i class="fa fa-check"></i><b>5.3</b> Centering and Scaling</a></li>
<li class="chapter" data-level="5.4" data-path="resolve-skewness.html"><a href="resolve-skewness.html"><i class="fa fa-check"></i><b>5.4</b> Resolve Skewness</a></li>
<li class="chapter" data-level="5.5" data-path="resolve-outliers.html"><a href="resolve-outliers.html"><i class="fa fa-check"></i><b>5.5</b> Resolve Outliers</a></li>
<li class="chapter" data-level="5.6" data-path="collinearity.html"><a href="collinearity.html"><i class="fa fa-check"></i><b>5.6</b> Collinearity</a></li>
<li class="chapter" data-level="5.7" data-path="sparse-variables.html"><a href="sparse-variables.html"><i class="fa fa-check"></i><b>5.7</b> Sparse Variables</a></li>
<li class="chapter" data-level="5.8" data-path="re-encode-dummy-variables.html"><a href="re-encode-dummy-variables.html"><i class="fa fa-check"></i><b>5.8</b> Re-encode Dummy Variables</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>6</b> Data Wrangling</a><ul>
<li class="chapter" data-level="6.1" data-path="read-and-write-data.html"><a href="read-and-write-data.html"><i class="fa fa-check"></i><b>6.1</b> Read and write data</a><ul>
<li class="chapter" data-level="6.1.1" data-path="read-and-write-data.html"><a href="read-and-write-data.html#readr"><i class="fa fa-check"></i><b>6.1.1</b> <code>readr</code></a></li>
<li class="chapter" data-level="6.1.2" data-path="read-and-write-data.html"><a href="read-and-write-data.html#data.table-enhanced-data.frame"><i class="fa fa-check"></i><b>6.1.2</b> <code>data.table</code>— enhanced <code>data.frame</code></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="summarize-data.html"><a href="summarize-data.html"><i class="fa fa-check"></i><b>6.2</b> Summarize data</a><ul>
<li class="chapter" data-level="6.2.1" data-path="summarize-data.html"><a href="summarize-data.html#apply-lapply-and-sapply-in-base-r"><i class="fa fa-check"></i><b>6.2.1</b> <code>apply()</code>, <code>lapply()</code> and <code>sapply()</code> in base R</a></li>
<li class="chapter" data-level="6.2.2" data-path="summarize-data.html"><a href="summarize-data.html#dplyr-package"><i class="fa fa-check"></i><b>6.2.2</b> <code>dplyr</code> package</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="tidy-and-reshape-data.html"><a href="tidy-and-reshape-data.html"><i class="fa fa-check"></i><b>6.3</b> Tidy and Reshape Data</a><ul>
<li class="chapter" data-level="6.3.1" data-path="tidy-and-reshape-data.html"><a href="tidy-and-reshape-data.html#reshape2-package"><i class="fa fa-check"></i><b>6.3.1</b> <code>reshape2</code> package</a></li>
<li class="chapter" data-level="6.3.2" data-path="tidy-and-reshape-data.html"><a href="tidy-and-reshape-data.html#tidyr-package"><i class="fa fa-check"></i><b>6.3.2</b> <code>tidyr</code> package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="modeltuningstrategy.html"><a href="modeltuningstrategy.html"><i class="fa fa-check"></i><b>7</b> Model Tuning Strategy</a><ul>
<li class="chapter" data-level="7.1" data-path="systematic-error-and-random-error.html"><a href="systematic-error-and-random-error.html"><i class="fa fa-check"></i><b>7.1</b> Systematic Error and Random Error</a><ul>
<li class="chapter" data-level="7.1.1" data-path="systematic-error-and-random-error.html"><a href="systematic-error-and-random-error.html#vbtradeoff"><i class="fa fa-check"></i><b>7.1.1</b> Variance-Bias Trade-Off</a></li>
<li class="chapter" data-level="7.1.2" data-path="systematic-error-and-random-error.html"><a href="systematic-error-and-random-error.html#measurement-error-in-the-response"><i class="fa fa-check"></i><b>7.1.2</b> Measurement Error in the Response</a></li>
<li class="chapter" data-level="7.1.3" data-path="systematic-error-and-random-error.html"><a href="systematic-error-and-random-error.html#measurement-error-in-the-independent-variables"><i class="fa fa-check"></i><b>7.1.3</b> Measurement Error in the Independent Variables</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-splitting-and-resampling.html"><a href="data-splitting-and-resampling.html"><i class="fa fa-check"></i><b>7.2</b> Data Splitting and Resampling</a><ul>
<li class="chapter" data-level="7.2.1" data-path="data-splitting-and-resampling.html"><a href="data-splitting-and-resampling.html#data-splitting"><i class="fa fa-check"></i><b>7.2.1</b> Data Splitting</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-splitting-and-resampling.html"><a href="data-splitting-and-resampling.html#resampling"><i class="fa fa-check"></i><b>7.2.2</b> Resampling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="measuring-performance.html"><a href="measuring-performance.html"><i class="fa fa-check"></i><b>8</b> Measuring Performance</a><ul>
<li class="chapter" data-level="8.1" data-path="regression-model-performance.html"><a href="regression-model-performance.html"><i class="fa fa-check"></i><b>8.1</b> Regression Model Performance</a></li>
<li class="chapter" data-level="8.2" data-path="classification-model-performance.html"><a href="classification-model-performance.html"><i class="fa fa-check"></i><b>8.2</b> Classification Model Performance</a><ul>
<li class="chapter" data-level="8.2.1" data-path="classification-model-performance.html"><a href="classification-model-performance.html#confusion-matrix"><i class="fa fa-check"></i><b>8.2.1</b> Confusion Matrix</a></li>
<li class="chapter" data-level="8.2.2" data-path="classification-model-performance.html"><a href="classification-model-performance.html#kappa-statistic"><i class="fa fa-check"></i><b>8.2.2</b> Kappa Statistic</a></li>
<li class="chapter" data-level="8.2.3" data-path="classification-model-performance.html"><a href="classification-model-performance.html#roc"><i class="fa fa-check"></i><b>8.2.3</b> ROC</a></li>
<li class="chapter" data-level="8.2.4" data-path="classification-model-performance.html"><a href="classification-model-performance.html#gain-and-lift-charts"><i class="fa fa-check"></i><b>8.2.4</b> Gain and Lift Charts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression-models.html"><a href="regression-models.html"><i class="fa fa-check"></i><b>9</b> Regression Models</a><ul>
<li class="chapter" data-level="9.1" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html"><i class="fa fa-check"></i><b>9.1</b> Ordinary Least Squares</a></li>
<li class="chapter" data-level="9.2" data-path="multivariate-adaptive-regression-splines.html"><a href="multivariate-adaptive-regression-splines.html"><i class="fa fa-check"></i><b>9.2</b> Multivariate Adaptive Regression Splines</a></li>
<li class="chapter" data-level="9.3" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html"><i class="fa fa-check"></i><b>9.3</b> Generalized Linear Model</a></li>
<li class="chapter" data-level="9.4" data-path="pcr-and-pls.html"><a href="pcr-and-pls.html"><i class="fa fa-check"></i><b>9.4</b> PCR and PLS</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regularization-methods.html"><a href="regularization-methods.html"><i class="fa fa-check"></i><b>10</b> Regularization Methods</a><ul>
<li class="chapter" data-level="10.1" data-path="ridge-regression.html"><a href="ridge-regression.html"><i class="fa fa-check"></i><b>10.1</b> Ridge Regression</a></li>
<li class="chapter" data-level="10.2" data-path="lasso.html"><a href="lasso.html"><i class="fa fa-check"></i><b>10.2</b> LASSO</a></li>
<li class="chapter" data-level="10.3" data-path="variable-selection-property-of-the-lasso.html"><a href="variable-selection-property-of-the-lasso.html"><i class="fa fa-check"></i><b>10.3</b> Variable selection property of the lasso</a></li>
<li class="chapter" data-level="10.4" data-path="elastic-net.html"><a href="elastic-net.html"><i class="fa fa-check"></i><b>10.4</b> Elastic Net</a></li>
<li class="chapter" data-level="10.5" data-path="penalized-generalized-linear-model.html"><a href="penalized-generalized-linear-model.html"><i class="fa fa-check"></i><b>10.5</b> Penalized Generalized Linear Model</a><ul>
<li class="chapter" data-level="10.5.1" data-path="penalized-generalized-linear-model.html"><a href="penalized-generalized-linear-model.html#introduction-to-glmnet-package"><i class="fa fa-check"></i><b>10.5.1</b> Introduction to <code>glmnet</code> package</a></li>
<li class="chapter" data-level="10.5.2" data-path="penalized-generalized-linear-model.html"><a href="penalized-generalized-linear-model.html#penalized-logistic-regression"><i class="fa fa-check"></i><b>10.5.2</b> Penalized logistic regression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="treemodel.html"><a href="treemodel.html"><i class="fa fa-check"></i><b>11</b> Tree-Based Methods</a><ul>
<li class="chapter" data-level="11.1" data-path="splitting-criteria.html"><a href="splitting-criteria.html"><i class="fa fa-check"></i><b>11.1</b> Splitting Criteria</a></li>
<li class="chapter" data-level="11.2" data-path="tree-pruning.html"><a href="tree-pruning.html"><i class="fa fa-check"></i><b>11.2</b> Tree Pruning</a></li>
<li class="chapter" data-level="11.3" data-path="regression-and-decision-tree-basic.html"><a href="regression-and-decision-tree-basic.html"><i class="fa fa-check"></i><b>11.3</b> Regression and Decision Tree Basic</a><ul>
<li class="chapter" data-level="11.3.1" data-path="regression-and-decision-tree-basic.html"><a href="regression-and-decision-tree-basic.html#regression-tree"><i class="fa fa-check"></i><b>11.3.1</b> Regression Tree</a></li>
<li class="chapter" data-level="11.3.2" data-path="regression-and-decision-tree-basic.html"><a href="regression-and-decision-tree-basic.html#decision-tree"><i class="fa fa-check"></i><b>11.3.2</b> Decision Tree</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="bagging-tree-1.html"><a href="bagging-tree-1.html"><i class="fa fa-check"></i><b>11.4</b> Bagging Tree</a></li>
<li class="chapter" data-level="11.5" data-path="random-forest.html"><a href="random-forest.html"><i class="fa fa-check"></i><b>11.5</b> Random Forest</a></li>
<li class="chapter" data-level="11.6" data-path="gradient-boosted-machine.html"><a href="gradient-boosted-machine.html"><i class="fa fa-check"></i><b>11.6</b> Gradient Boosted Machine</a><ul>
<li class="chapter" data-level="11.6.1" data-path="gradient-boosted-machine.html"><a href="gradient-boosted-machine.html#adaptive-boosting"><i class="fa fa-check"></i><b>11.6.1</b> Adaptive Boosting</a></li>
<li class="chapter" data-level="11.6.2" data-path="gradient-boosted-machine.html"><a href="gradient-boosted-machine.html#stochastic-gradient-boosting"><i class="fa fa-check"></i><b>11.6.2</b> Stochastic Gradient Boosting</a></li>
<li class="chapter" data-level="11.6.3" data-path="gradient-boosted-machine.html"><a href="gradient-boosted-machine.html#boosting-as-additive-model"><i class="fa fa-check"></i><b>11.6.3</b> Boosting as Additive Model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="deep-learning.html"><a href="deep-learning.html"><i class="fa fa-check"></i><b>12</b> Deep Learning</a><ul>
<li class="chapter" data-level="12.1" data-path="deep-learning-introduction-and-history.html"><a href="deep-learning-introduction-and-history.html"><i class="fa fa-check"></i><b>12.1</b> Deep Learning Introduction and History</a></li>
<li class="chapter" data-level="12.2" data-path="projection-pursuit-regression.html"><a href="projection-pursuit-regression.html"><i class="fa fa-check"></i><b>12.2</b> Projection Pursuit Regression</a></li>
<li class="chapter" data-level="12.3" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html"><i class="fa fa-check"></i><b>12.3</b> Feedforward Neural Network</a><ul>
<li class="chapter" data-level="12.3.1" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#logistic_reg_as_neural_network"><i class="fa fa-check"></i><b>12.3.1</b> Logistic Regression as Neural Network</a></li>
<li class="chapter" data-level="12.3.2" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#gradient-descent"><i class="fa fa-check"></i><b>12.3.2</b> Gradient Descent</a></li>
<li class="chapter" data-level="12.3.3" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#deep-neural-network"><i class="fa fa-check"></i><b>12.3.3</b> Deep Neural Network</a></li>
<li class="chapter" data-level="12.3.4" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#activation-function"><i class="fa fa-check"></i><b>12.3.4</b> Activation Function</a></li>
<li class="chapter" data-level="12.3.5" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#deal-with-overfitting"><i class="fa fa-check"></i><b>12.3.5</b> Deal with Overfitting</a></li>
<li class="chapter" data-level="12.3.6" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#optimization"><i class="fa fa-check"></i><b>12.3.6</b> Optimization</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="convolutional-neural-network.html"><a href="convolutional-neural-network.html"><i class="fa fa-check"></i><b>12.4</b> Convolutional Neural Network</a></li>
<li class="chapter" data-level="12.5" data-path="recurrent-neural-network.html"><a href="recurrent-neural-network.html"><i class="fa fa-check"></i><b>12.5</b> Recurrent Neural Network</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="r-code-for-data-simulation.html"><a href="r-code-for-data-simulation.html"><i class="fa fa-check"></i><b>A</b> R code for data simulation</a><ul>
<li class="chapter" data-level="A.1" data-path="customer-data-for-clothing-company.html"><a href="customer-data-for-clothing-company.html"><i class="fa fa-check"></i><b>A.1</b> Customer Data for Clothing Company</a></li>
<li class="chapter" data-level="A.2" data-path="customer-satisfaction-survey-data-from-airline-company-1.html"><a href="customer-satisfaction-survey-data-from-airline-company-1.html"><i class="fa fa-check"></i><b>A.2</b> Customer Satisfaction Survey Data from Airline Company</a></li>
<li class="chapter" data-level="A.3" data-path="swine-disease-breakout-data.html"><a href="swine-disease-breakout-data.html"><i class="fa fa-check"></i><b>A.3</b> Swine Disease Breakout Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="customer-data-for-clothing-company" class="section level2">
<h2><span class="header-section-number">A.1</span> Customer Data for Clothing Company</h2>
<p>The simulation is not very straightforward and we will break it into three parts:
1. Define data structure: variable names, variable distribution, customer segment names, segment size
1. Variable distribution parameters: mean and variance
1. Iterate across segments and variables. Simulate data according to specific parameters assigned</p>
<p>By organizing code this way, it makes easy for us to change specific parts of the simulation. For example, if we want to change the distribution of one variable, we can just change the corresponding part of the code.</p>
<p>Here is code to define data structure:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb385-1" data-line-number="1"><span class="co"># set a random number seed to </span></a>
<a class="sourceLine" id="cb385-2" data-line-number="2"><span class="co"># make the process repeatable</span></a>
<a class="sourceLine" id="cb385-3" data-line-number="3"><span class="kw">set.seed</span>(<span class="dv">12345</span>)</a>
<a class="sourceLine" id="cb385-4" data-line-number="4"><span class="co"># define the number of observations</span></a>
<a class="sourceLine" id="cb385-5" data-line-number="5">ncust &lt;-<span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb385-6" data-line-number="6"><span class="co"># create a data frmae for simulated data</span></a>
<a class="sourceLine" id="cb385-7" data-line-number="7">seg_dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">id =</span> <span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span>ncust)))</a>
<a class="sourceLine" id="cb385-8" data-line-number="8"><span class="co"># assign the variable names</span></a>
<a class="sourceLine" id="cb385-9" data-line-number="9">vars &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender&quot;</span>, <span class="st">&quot;income&quot;</span>, <span class="st">&quot;house&quot;</span>, <span class="st">&quot;store_exp&quot;</span>, </a>
<a class="sourceLine" id="cb385-10" data-line-number="10">    <span class="st">&quot;online_exp&quot;</span>, <span class="st">&quot;store_trans&quot;</span>, <span class="st">&quot;online_trans&quot;</span>)</a>
<a class="sourceLine" id="cb385-11" data-line-number="11"><span class="co"># assign distribution for each variable</span></a>
<a class="sourceLine" id="cb385-12" data-line-number="12">vartype &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;norm&quot;</span>, <span class="st">&quot;binom&quot;</span>, <span class="st">&quot;norm&quot;</span>, <span class="st">&quot;binom&quot;</span>, <span class="st">&quot;norm&quot;</span>, <span class="st">&quot;norm&quot;</span>, </a>
<a class="sourceLine" id="cb385-13" data-line-number="13">    <span class="st">&quot;pois&quot;</span>, <span class="st">&quot;pois&quot;</span>)</a>
<a class="sourceLine" id="cb385-14" data-line-number="14"><span class="co"># names of 4 segments</span></a>
<a class="sourceLine" id="cb385-15" data-line-number="15">group_name &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Price&quot;</span>, <span class="st">&quot;Conspicuous&quot;</span>, <span class="st">&quot;Quality&quot;</span>, <span class="st">&quot;Style&quot;</span>)</a>
<a class="sourceLine" id="cb385-16" data-line-number="16"><span class="co"># size of each segments</span></a>
<a class="sourceLine" id="cb385-17" data-line-number="17">group_size &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">250</span>, <span class="dv">200</span>, <span class="dv">200</span>, <span class="dv">350</span>)</a></code></pre></div>
<p>The next step is to define variable distribution parameters. There are 4 segments of customers and 8 parameters. Different segments correspond to different parameters. Let’s store the parameters in a 4×8 matrix:</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb386-1" data-line-number="1"><span class="co"># matrix for mean</span></a>
<a class="sourceLine" id="cb386-2" data-line-number="2">mus &lt;-<span class="st"> </span><span class="kw">matrix</span>( <span class="kw">c</span>(</a>
<a class="sourceLine" id="cb386-3" data-line-number="3">  <span class="co"># Price</span></a>
<a class="sourceLine" id="cb386-4" data-line-number="4">  <span class="dv">60</span>, <span class="fl">0.5</span>, <span class="dv">120000</span>,<span class="fl">0.9</span>, <span class="dv">500</span>,<span class="dv">200</span>,<span class="dv">5</span>,<span class="dv">2</span>,</a>
<a class="sourceLine" id="cb386-5" data-line-number="5">  <span class="co"># Conspicuous</span></a>
<a class="sourceLine" id="cb386-6" data-line-number="6">  <span class="dv">40</span>, <span class="fl">0.7</span>, <span class="dv">200000</span>,<span class="fl">0.9</span>, <span class="dv">5000</span>,<span class="dv">5000</span>,<span class="dv">10</span>,<span class="dv">10</span>,</a>
<a class="sourceLine" id="cb386-7" data-line-number="7">  <span class="co"># Quality</span></a>
<a class="sourceLine" id="cb386-8" data-line-number="8">  <span class="dv">36</span>, <span class="fl">0.5</span>, <span class="dv">70000</span>, <span class="fl">0.4</span>, <span class="dv">300</span>, <span class="dv">2000</span>,<span class="dv">2</span>,<span class="dv">15</span>,</a>
<a class="sourceLine" id="cb386-9" data-line-number="9">  <span class="co"># Style</span></a>
<a class="sourceLine" id="cb386-10" data-line-number="10">  <span class="dv">25</span>, <span class="fl">0.2</span>, <span class="dv">90000</span>, <span class="fl">0.2</span>, <span class="dv">200</span>, <span class="dv">2000</span>,<span class="dv">2</span>,<span class="dv">20</span>), </a>
<a class="sourceLine" id="cb386-11" data-line-number="11">  <span class="dt">ncol=</span><span class="kw">length</span>(vars), <span class="dt">byrow=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb387-1" data-line-number="1"><span class="co"># matrix for variance</span></a>
<a class="sourceLine" id="cb387-2" data-line-number="2">sds&lt;-<span class="st"> </span><span class="kw">matrix</span>( <span class="kw">c</span>(</a>
<a class="sourceLine" id="cb387-3" data-line-number="3">  <span class="co"># Price</span></a>
<a class="sourceLine" id="cb387-4" data-line-number="4">  <span class="dv">3</span>,<span class="ot">NA</span>,<span class="dv">8000</span>,<span class="ot">NA</span>,<span class="dv">100</span>,<span class="dv">50</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb387-5" data-line-number="5">  <span class="co"># Conspicuous</span></a>
<a class="sourceLine" id="cb387-6" data-line-number="6">  <span class="dv">5</span>,<span class="ot">NA</span>,<span class="dv">50000</span>,<span class="ot">NA</span>,<span class="dv">1000</span>,<span class="dv">1500</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb387-7" data-line-number="7">  <span class="co"># Quality</span></a>
<a class="sourceLine" id="cb387-8" data-line-number="8">  <span class="dv">7</span>,<span class="ot">NA</span>,<span class="dv">10000</span>,<span class="ot">NA</span>,<span class="dv">50</span>,<span class="dv">200</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb387-9" data-line-number="9">  <span class="co"># Style</span></a>
<a class="sourceLine" id="cb387-10" data-line-number="10">  <span class="dv">2</span>,<span class="ot">NA</span>,<span class="dv">5000</span>,<span class="ot">NA</span>,<span class="dv">10</span>,<span class="dv">500</span>,<span class="ot">NA</span>,<span class="ot">NA</span>), </a>
<a class="sourceLine" id="cb387-11" data-line-number="11">  <span class="dt">ncol=</span><span class="kw">length</span>(vars), <span class="dt">byrow=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<p>Now we are ready to simulate data using the parameters defined above:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb388-1" data-line-number="1"><span class="co"># simulate non-survey data</span></a>
<a class="sourceLine" id="cb388-2" data-line-number="2">sim.dat &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb388-3" data-line-number="3"><span class="kw">set.seed</span>(<span class="dv">2016</span>)</a>
<a class="sourceLine" id="cb388-4" data-line-number="4"><span class="co"># loop on customer segment (i)</span></a>
<a class="sourceLine" id="cb388-5" data-line-number="5"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(group_name)) {</a>
<a class="sourceLine" id="cb388-6" data-line-number="6">    </a>
<a class="sourceLine" id="cb388-7" data-line-number="7">    <span class="co"># add this line in order to moniter the process</span></a>
<a class="sourceLine" id="cb388-8" data-line-number="8">    <span class="kw">cat</span>(i, group_name[i], <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb388-9" data-line-number="9">    </a>
<a class="sourceLine" id="cb388-10" data-line-number="10">    <span class="co"># create an empty matrix to store relevent data</span></a>
<a class="sourceLine" id="cb388-11" data-line-number="11">    seg &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow =</span> group_size[i], </a>
<a class="sourceLine" id="cb388-12" data-line-number="12">    <span class="dt">ncol =</span> <span class="kw">length</span>(vars)))</a>
<a class="sourceLine" id="cb388-13" data-line-number="13">    </a>
<a class="sourceLine" id="cb388-14" data-line-number="14">    <span class="co"># Simulate data within segment i</span></a>
<a class="sourceLine" id="cb388-15" data-line-number="15">    <span class="cf">for</span> (j <span class="cf">in</span> <span class="kw">seq_along</span>(vars)) {</a>
<a class="sourceLine" id="cb388-16" data-line-number="16">        </a>
<a class="sourceLine" id="cb388-17" data-line-number="17">        <span class="co"># loop on every variable (j)</span></a>
<a class="sourceLine" id="cb388-18" data-line-number="18">        <span class="cf">if</span> (vartype[j] <span class="op">==</span><span class="st"> &quot;norm&quot;</span>) {</a>
<a class="sourceLine" id="cb388-19" data-line-number="19">            <span class="co"># simulate normal distribution</span></a>
<a class="sourceLine" id="cb388-20" data-line-number="20">            seg[, j] &lt;-<span class="st"> </span><span class="kw">rnorm</span>(group_size[i], <span class="dt">mean =</span> mus[i, </a>
<a class="sourceLine" id="cb388-21" data-line-number="21">                j], <span class="dt">sd =</span> sds[i, j])</a>
<a class="sourceLine" id="cb388-22" data-line-number="22">        } <span class="cf">else</span> <span class="cf">if</span> (vartype[j] <span class="op">==</span><span class="st"> &quot;pois&quot;</span>) {</a>
<a class="sourceLine" id="cb388-23" data-line-number="23">            <span class="co"># simulate poisson distribution</span></a>
<a class="sourceLine" id="cb388-24" data-line-number="24">            seg[, j] &lt;-<span class="st"> </span><span class="kw">rpois</span>(group_size[i], <span class="dt">lambda =</span> mus[i, </a>
<a class="sourceLine" id="cb388-25" data-line-number="25">                j])</a>
<a class="sourceLine" id="cb388-26" data-line-number="26">        } <span class="cf">else</span> <span class="cf">if</span> (vartype[j] <span class="op">==</span><span class="st"> &quot;binom&quot;</span>) {</a>
<a class="sourceLine" id="cb388-27" data-line-number="27">            <span class="co"># simulate binomial distribution</span></a>
<a class="sourceLine" id="cb388-28" data-line-number="28">            seg[, j] &lt;-<span class="st"> </span><span class="kw">rbinom</span>(group_size[i], <span class="dt">size =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb388-29" data-line-number="29">                <span class="dt">prob =</span> mus[i, j])</a>
<a class="sourceLine" id="cb388-30" data-line-number="30">        } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb388-31" data-line-number="31">            <span class="co"># if the distribution name is not one of the above, stop</span></a>
<a class="sourceLine" id="cb388-32" data-line-number="32">            <span class="co"># and return a message</span></a>
<a class="sourceLine" id="cb388-33" data-line-number="33">            <span class="kw">stop</span>(<span class="st">&quot;Don&#39;t have type:&quot;</span>, vartype[j])</a>
<a class="sourceLine" id="cb388-34" data-line-number="34">        }</a>
<a class="sourceLine" id="cb388-35" data-line-number="35">    }</a>
<a class="sourceLine" id="cb388-36" data-line-number="36">    sim.dat &lt;-<span class="st"> </span><span class="kw">rbind</span>(sim.dat, seg)</a>
<a class="sourceLine" id="cb388-37" data-line-number="37">}</a></code></pre></div>
<p>Now let’s edit the data we just simulated a little by adding tags to 0/1 binomial variables:</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb389-1" data-line-number="1"><span class="co"># assign variable names</span></a>
<a class="sourceLine" id="cb389-2" data-line-number="2"><span class="kw">names</span>(sim.dat) &lt;-<span class="st"> </span>vars</a>
<a class="sourceLine" id="cb389-3" data-line-number="3"><span class="co"># assign factor levels to segment variable</span></a>
<a class="sourceLine" id="cb389-4" data-line-number="4">sim.dat<span class="op">$</span>segment &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">rep</span>(group_name, <span class="dt">times =</span> group_size))</a>
<a class="sourceLine" id="cb389-5" data-line-number="5"><span class="co"># recode gender and house variable</span></a>
<a class="sourceLine" id="cb389-6" data-line-number="6">sim.dat<span class="op">$</span>gender &lt;-<span class="st"> </span><span class="kw">factor</span>(sim.dat<span class="op">$</span>gender, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Female&quot;</span>, </a>
<a class="sourceLine" id="cb389-7" data-line-number="7">    <span class="st">&quot;Male&quot;</span>))</a>
<a class="sourceLine" id="cb389-8" data-line-number="8">sim.dat<span class="op">$</span>house &lt;-<span class="st"> </span><span class="kw">factor</span>(sim.dat<span class="op">$</span>house, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;No&quot;</span>, </a>
<a class="sourceLine" id="cb389-9" data-line-number="9">    <span class="st">&quot;Yes&quot;</span>))</a>
<a class="sourceLine" id="cb389-10" data-line-number="10"><span class="co"># store_trans and online_trans are at least 1</span></a>
<a class="sourceLine" id="cb389-11" data-line-number="11">sim.dat<span class="op">$</span>store_trans &lt;-<span class="st"> </span>sim.dat<span class="op">$</span>store_trans <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb389-12" data-line-number="12">sim.dat<span class="op">$</span>online_trans &lt;-<span class="st"> </span>sim.dat<span class="op">$</span>online_trans <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb389-13" data-line-number="13"><span class="co"># age is integer</span></a>
<a class="sourceLine" id="cb389-14" data-line-number="14">sim.dat<span class="op">$</span>age &lt;-<span class="st"> </span><span class="kw">floor</span>(sim.dat<span class="op">$</span>age)</a></code></pre></div>
<p>In the real world, the data always includes some noise such as missing, wrong imputation. So we will add some noise to the data:</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb390-1" data-line-number="1"><span class="co"># add missing values</span></a>
<a class="sourceLine" id="cb390-2" data-line-number="2">idxm &lt;-<span class="st"> </span><span class="kw">as.logical</span>(<span class="kw">rbinom</span>(ncust, <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">prob =</span> sim.dat<span class="op">$</span>age<span class="op">/</span><span class="dv">200</span>))</a>
<a class="sourceLine" id="cb390-3" data-line-number="3">sim.dat<span class="op">$</span>income[idxm] &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb390-4" data-line-number="4"><span class="co"># add wrong imputations and outliers</span></a>
<a class="sourceLine" id="cb390-5" data-line-number="5"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb390-6" data-line-number="6">idx &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span>ncust, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb390-7" data-line-number="7">sim.dat<span class="op">$</span>age[idx[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="dv">300</span></a>
<a class="sourceLine" id="cb390-8" data-line-number="8">sim.dat<span class="op">$</span>store_exp[idx[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="dv">-500</span></a>
<a class="sourceLine" id="cb390-9" data-line-number="9">sim.dat<span class="op">$</span>store_exp[idx[<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>]] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">50000</span>, <span class="dv">30000</span>, <span class="dv">30000</span>)</a></code></pre></div>
<p>So far we have created part of the data. You can check it using <code>summary(sim.dat)</code>. Next, we will move on to simulate survey data.</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb391-1" data-line-number="1"><span class="co"># number of survey questions</span></a>
<a class="sourceLine" id="cb391-2" data-line-number="2">nq &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb391-3" data-line-number="3"></a>
<a class="sourceLine" id="cb391-4" data-line-number="4"><span class="co"># mean matrix for different segments </span></a>
<a class="sourceLine" id="cb391-5" data-line-number="5">mus2 &lt;-<span class="st"> </span><span class="kw">matrix</span>( <span class="kw">c</span>( <span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">4</span>, <span class="co"># Price</span></a>
<a class="sourceLine" id="cb391-6" data-line-number="6">  <span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">2</span>, <span class="co"># Conspicuous</span></a>
<a class="sourceLine" id="cb391-7" data-line-number="7">  <span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>, <span class="co"># Quality</span></a>
<a class="sourceLine" id="cb391-8" data-line-number="8">  <span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">2</span>), <span class="co"># Style</span></a>
<a class="sourceLine" id="cb391-9" data-line-number="9"><span class="dt">ncol=</span>nq, <span class="dt">byrow=</span><span class="ot">TRUE</span>) </a>
<a class="sourceLine" id="cb391-10" data-line-number="10"></a>
<a class="sourceLine" id="cb391-11" data-line-number="11"><span class="co"># assume the variance is 0.2 for all</span></a>
<a class="sourceLine" id="cb391-12" data-line-number="12">sd2 &lt;-<span class="st"> </span><span class="fl">0.2</span></a>
<a class="sourceLine" id="cb391-13" data-line-number="13">sim.dat2 &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb391-14" data-line-number="14"><span class="kw">set.seed</span>(<span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb391-15" data-line-number="15"><span class="co"># loop for customer segment (i)</span></a>
<a class="sourceLine" id="cb391-16" data-line-number="16"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(group_name)) {</a>
<a class="sourceLine" id="cb391-17" data-line-number="17">    <span class="co"># the following line is used for checking the</span></a>
<a class="sourceLine" id="cb391-18" data-line-number="18">    <span class="co"># progress cat (i, group_name[i],&#39;\n&#39;) create an</span></a>
<a class="sourceLine" id="cb391-19" data-line-number="19">    <span class="co"># empty data frame to store data</span></a>
<a class="sourceLine" id="cb391-20" data-line-number="20">    seg &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow =</span> group_size[i], </a>
<a class="sourceLine" id="cb391-21" data-line-number="21">        <span class="dt">ncol =</span> nq))</a>
<a class="sourceLine" id="cb391-22" data-line-number="22">    <span class="co"># simulate data within segment</span></a>
<a class="sourceLine" id="cb391-23" data-line-number="23">    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>nq) {</a>
<a class="sourceLine" id="cb391-24" data-line-number="24">        <span class="co"># simulate normal distribution</span></a>
<a class="sourceLine" id="cb391-25" data-line-number="25">        res &lt;-<span class="st"> </span><span class="kw">rnorm</span>(group_size[i], <span class="dt">mean =</span> mus2[i, </a>
<a class="sourceLine" id="cb391-26" data-line-number="26">            j], <span class="dt">sd =</span> sd2)</a>
<a class="sourceLine" id="cb391-27" data-line-number="27">        <span class="co"># set upper and lower limit</span></a>
<a class="sourceLine" id="cb391-28" data-line-number="28">        res[res <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>] &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb391-29" data-line-number="29">        res[res <span class="op">&lt;</span><span class="st"> </span><span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb391-30" data-line-number="30">        <span class="co"># convert continuous values to discrete integers</span></a>
<a class="sourceLine" id="cb391-31" data-line-number="31">        seg[, j] &lt;-<span class="st"> </span><span class="kw">floor</span>(res)</a>
<a class="sourceLine" id="cb391-32" data-line-number="32">    }</a>
<a class="sourceLine" id="cb391-33" data-line-number="33">    sim.dat2 &lt;-<span class="st"> </span><span class="kw">rbind</span>(sim.dat2, seg)</a>
<a class="sourceLine" id="cb391-34" data-line-number="34">}</a>
<a class="sourceLine" id="cb391-35" data-line-number="35"></a>
<a class="sourceLine" id="cb391-36" data-line-number="36"><span class="kw">names</span>(sim.dat2) &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Q&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb391-37" data-line-number="37">sim.dat &lt;-<span class="st"> </span><span class="kw">cbind</span>(sim.dat, sim.dat2)</a>
<a class="sourceLine" id="cb391-38" data-line-number="38">sim.dat<span class="op">$</span>segment &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">rep</span>(group_name, <span class="dt">times =</span> group_size))</a></code></pre></div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-code-for-data-simulation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="customer-satisfaction-survey-data-from-airline-company-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"github": true
},
"fontsettings": {
"theme": "sepia",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/happyrabbit/IntroDataScience/19-Appendix.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["IDS.pdf", "IDS.epub", "IDS.mobi"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
