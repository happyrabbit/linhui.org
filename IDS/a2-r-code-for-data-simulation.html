<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Introduction to Data Science</title>
  <meta name="description" content="Introduction to Data Science">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Introduction to Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://scientistcafe.com/IDS/" />
  
  <meta property="og:description" content="Introduction to Data Science" />
  <meta name="github-repo" content="happyrabbit/IntroDataScience" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Introduction to Data Science" />
  
  <meta name="twitter:description" content="Introduction to Data Science" />
  

<meta name="author" content="Hui Lin and Ming Li">


<meta name="date" content="2019-04-27">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="other-useful-topics.html">
<link rel="next" href="references.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://scientistcafe.com">Homepage</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="goal-of-the-book.html"><a href="goal-of-the-book.html"><i class="fa fa-check"></i>Goal of the Book</a></li>
<li class="chapter" data-level="" data-path="who-this-book-is-for.html"><a href="who-this-book-is-for.html"><i class="fa fa-check"></i>Who This Book Is For</a></li>
<li class="chapter" data-level="" data-path="what-this-book-covers.html"><a href="what-this-book-covers.html"><i class="fa fa-check"></i>What This Book Covers</a></li>
<li class="chapter" data-level="" data-path="conventions.html"><a href="conventions.html"><i class="fa fa-check"></i>Conventions</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="blind-men-and-an-elephant.html"><a href="blind-men-and-an-elephant.html"><i class="fa fa-check"></i><b>1.1</b> Blind men and an elephant</a><ul>
<li class="chapter" data-level="1.1.1" data-path="blind-men-and-an-elephant.html"><a href="blind-men-and-an-elephant.html#data-science-roleskill-tracks"><i class="fa fa-check"></i><b>1.1.1</b> Data science role/skill tracks</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="what-should-data-science-do.html"><a href="what-should-data-science-do.html"><i class="fa fa-check"></i><b>1.2</b> What should data science do?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="what-should-data-science-do.html"><a href="what-should-data-science-do.html#lets-dream-big"><i class="fa fa-check"></i><b>1.2.1</b> Letâ€™s dream big</a></li>
<li class="chapter" data-level="1.2.2" data-path="what-should-data-science-do.html"><a href="what-should-data-science-do.html#what-kind-of-questions-can-data-science-solve"><i class="fa fa-check"></i><b>1.2.2</b> What kind of questions can data science solve?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="soft-skills-for-data-scientists.html"><a href="soft-skills-for-data-scientists.html"><i class="fa fa-check"></i><b>2</b> Soft Skills for Data Scientists</a><ul>
<li class="chapter" data-level="2.1" data-path="comparison-between-statistician-and-data-scientist.html"><a href="comparison-between-statistician-and-data-scientist.html"><i class="fa fa-check"></i><b>2.1</b> Comparison between Statistician and Data Scientist</a></li>
<li class="chapter" data-level="2.2" data-path="where-does-data-science-team-fits.html"><a href="where-does-data-science-team-fits.html"><i class="fa fa-check"></i><b>2.2</b> Where Does Data Science Team Fits?</a></li>
<li class="chapter" data-level="2.3" data-path="beyond-data-and-analytics.html"><a href="beyond-data-and-analytics.html"><i class="fa fa-check"></i><b>2.3</b> Beyond Data and Analytics</a></li>
<li class="chapter" data-level="2.4" data-path="data-scientist-as-a-leader.html"><a href="data-scientist-as-a-leader.html"><i class="fa fa-check"></i><b>2.4</b> Data Scientist as a Leader</a></li>
<li class="chapter" data-level="2.5" data-path="three-pillars-of-knowledge.html"><a href="three-pillars-of-knowledge.html"><i class="fa fa-check"></i><b>2.5</b> Three Pillars of Knowledge</a></li>
<li class="chapter" data-level="2.6" data-path="common-pitfalls-of-data-science-projects.html"><a href="common-pitfalls-of-data-science-projects.html"><i class="fa fa-check"></i><b>2.6</b> Common Pitfalls of Data Science Projects</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-the-data.html"><a href="introduction-to-the-data.html"><i class="fa fa-check"></i><b>3</b> Introduction to the data</a><ul>
<li class="chapter" data-level="3.1" data-path="customer-data-for-clothing-company.html"><a href="customer-data-for-clothing-company.html"><i class="fa fa-check"></i><b>3.1</b> Customer Data for Clothing Company</a></li>
<li class="chapter" data-level="3.2" data-path="customer-satisfaction-survey-data-from-airline-company.html"><a href="customer-satisfaction-survey-data-from-airline-company.html"><i class="fa fa-check"></i><b>3.2</b> Customer Satisfaction Survey Data from Airline Company</a></li>
<li class="chapter" data-level="3.3" data-path="swine-disease-breakout-data.html"><a href="swine-disease-breakout-data.html"><i class="fa fa-check"></i><b>3.3</b> Swine Disease Breakout Data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-pre-processing.html"><a href="data-pre-processing.html"><i class="fa fa-check"></i><b>4</b> Data Pre-processing</a><ul>
<li class="chapter" data-level="4.1" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>4.1</b> Data Cleaning</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4.2</b> Missing Values</a><ul>
<li class="chapter" data-level="4.2.1" data-path="missing-values.html"><a href="missing-values.html#impute-missing-values-with-medianmode"><i class="fa fa-check"></i><b>4.2.1</b> Impute missing values with median/mode</a></li>
<li class="chapter" data-level="4.2.2" data-path="missing-values.html"><a href="missing-values.html#k-nearest-neighbors"><i class="fa fa-check"></i><b>4.2.2</b> K-nearest neighbors</a></li>
<li class="chapter" data-level="4.2.3" data-path="missing-values.html"><a href="missing-values.html#bagging-tree"><i class="fa fa-check"></i><b>4.2.3</b> Bagging Tree</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="centering-and-scaling.html"><a href="centering-and-scaling.html"><i class="fa fa-check"></i><b>4.3</b> Centering and Scaling</a></li>
<li class="chapter" data-level="4.4" data-path="resolve-skewness.html"><a href="resolve-skewness.html"><i class="fa fa-check"></i><b>4.4</b> Resolve Skewness</a></li>
<li class="chapter" data-level="4.5" data-path="resolve-outliers.html"><a href="resolve-outliers.html"><i class="fa fa-check"></i><b>4.5</b> Resolve Outliers</a></li>
<li class="chapter" data-level="4.6" data-path="collinearity.html"><a href="collinearity.html"><i class="fa fa-check"></i><b>4.6</b> Collinearity</a></li>
<li class="chapter" data-level="4.7" data-path="sparse-variables.html"><a href="sparse-variables.html"><i class="fa fa-check"></i><b>4.7</b> Sparse Variables</a></li>
<li class="chapter" data-level="4.8" data-path="re-encode-dummy-variables.html"><a href="re-encode-dummy-variables.html"><i class="fa fa-check"></i><b>4.8</b> Re-encode Dummy Variables</a></li>
<li class="chapter" data-level="4.9" data-path="python-computing.html"><a href="python-computing.html"><i class="fa fa-check"></i><b>4.9</b> Python Computing</a><ul>
<li class="chapter" data-level="4.9.1" data-path="python-computing.html"><a href="python-computing.html#data-cleaning-1"><i class="fa fa-check"></i><b>4.9.1</b> Data Cleaning</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>5</b> Data Wrangling</a><ul>
<li class="chapter" data-level="5.1" data-path="data-wrangling-using-r.html"><a href="data-wrangling-using-r.html"><i class="fa fa-check"></i><b>5.1</b> Data Wrangling Using R</a><ul>
<li class="chapter" data-level="5.1.1" data-path="data-wrangling-using-r.html"><a href="data-wrangling-using-r.html#read-and-write-data"><i class="fa fa-check"></i><b>5.1.1</b> Read and write data</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-wrangling-using-r.html"><a href="data-wrangling-using-r.html#summarize-data"><i class="fa fa-check"></i><b>5.1.2</b> Summarize data</a></li>
<li class="chapter" data-level="5.1.3" data-path="data-wrangling-using-r.html"><a href="data-wrangling-using-r.html#dplyr-package"><i class="fa fa-check"></i><b>5.1.3</b> <code>dplyr</code> package</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="tidy-and-reshape-data.html"><a href="tidy-and-reshape-data.html"><i class="fa fa-check"></i><b>5.2</b> Tidy and Reshape Data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="tidy-and-reshape-data.html"><a href="tidy-and-reshape-data.html#reshape2-package"><i class="fa fa-check"></i><b>5.2.1</b> <code>reshape2</code> package</a></li>
<li class="chapter" data-level="5.2.2" data-path="tidy-and-reshape-data.html"><a href="tidy-and-reshape-data.html#tidyr-package"><i class="fa fa-check"></i><b>5.2.2</b> <code>tidyr</code> package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="model-tuning-strategy.html"><a href="model-tuning-strategy.html"><i class="fa fa-check"></i><b>6</b> Model Tuning Strategy</a><ul>
<li class="chapter" data-level="6.1" data-path="systematic-error-and-random-error.html"><a href="systematic-error-and-random-error.html"><i class="fa fa-check"></i><b>6.1</b> Systematic Error and Random Error</a><ul>
<li class="chapter" data-level="6.1.1" data-path="systematic-error-and-random-error.html"><a href="systematic-error-and-random-error.html#measurement-error-in-the-response"><i class="fa fa-check"></i><b>6.1.1</b> Measurement Error in the Response</a></li>
<li class="chapter" data-level="6.1.2" data-path="systematic-error-and-random-error.html"><a href="systematic-error-and-random-error.html#measurement-error-in-the-independent-variables"><i class="fa fa-check"></i><b>6.1.2</b> Measurement Error in the Independent Variables</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data-splitting-and-resampling.html"><a href="data-splitting-and-resampling.html"><i class="fa fa-check"></i><b>6.2</b> Data Splitting and Resampling</a><ul>
<li class="chapter" data-level="6.2.1" data-path="data-splitting-and-resampling.html"><a href="data-splitting-and-resampling.html#data-splitting"><i class="fa fa-check"></i><b>6.2.1</b> Data Splitting</a></li>
<li class="chapter" data-level="6.2.2" data-path="data-splitting-and-resampling.html"><a href="data-splitting-and-resampling.html#resampling"><i class="fa fa-check"></i><b>6.2.2</b> Resampling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="measuring-performance.html"><a href="measuring-performance.html"><i class="fa fa-check"></i><b>7</b> Measuring Performance</a><ul>
<li class="chapter" data-level="7.1" data-path="regression-model-performance.html"><a href="regression-model-performance.html"><i class="fa fa-check"></i><b>7.1</b> Regression Model Performance</a></li>
<li class="chapter" data-level="7.2" data-path="classification-model-performance.html"><a href="classification-model-performance.html"><i class="fa fa-check"></i><b>7.2</b> Classification Model Performance</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="feature-engineering.html"><a href="feature-engineering.html"><i class="fa fa-check"></i><b>8</b> Feature Engineering</a><ul>
<li class="chapter" data-level="8.1" data-path="feature-construction.html"><a href="feature-construction.html"><i class="fa fa-check"></i><b>8.1</b> Feature Construction</a></li>
<li class="chapter" data-level="8.2" data-path="feature-extraction.html"><a href="feature-extraction.html"><i class="fa fa-check"></i><b>8.2</b> Feature Extraction</a></li>
<li class="chapter" data-level="8.3" data-path="feature-selection.html"><a href="feature-selection.html"><i class="fa fa-check"></i><b>8.3</b> Feature Selection</a><ul>
<li class="chapter" data-level="8.3.1" data-path="feature-selection.html"><a href="feature-selection.html#filter-method"><i class="fa fa-check"></i><b>8.3.1</b> Filter Method</a></li>
<li class="chapter" data-level="8.3.2" data-path="feature-selection.html"><a href="feature-selection.html#wrapper-method"><i class="fa fa-check"></i><b>8.3.2</b> Wrapper Method</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression-models.html"><a href="regression-models.html"><i class="fa fa-check"></i><b>9</b> Regression Models</a><ul>
<li class="chapter" data-level="9.1" data-path="ordinary-least-squares.html"><a href="ordinary-least-squares.html"><i class="fa fa-check"></i><b>9.1</b> Ordinary Least Squares</a></li>
<li class="chapter" data-level="9.2" data-path="multivariate-adaptive-regression-splines.html"><a href="multivariate-adaptive-regression-splines.html"><i class="fa fa-check"></i><b>9.2</b> Multivariate Adaptive Regression Splines</a></li>
<li class="chapter" data-level="9.3" data-path="generalized-linear-model.html"><a href="generalized-linear-model.html"><i class="fa fa-check"></i><b>9.3</b> Generalized Linear Model</a></li>
<li class="chapter" data-level="9.4" data-path="pcr-and-pls.html"><a href="pcr-and-pls.html"><i class="fa fa-check"></i><b>9.4</b> PCR and PLS</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regularization-methods.html"><a href="regularization-methods.html"><i class="fa fa-check"></i><b>10</b> Regularization Methods</a><ul>
<li class="chapter" data-level="10.1" data-path="ridge-regression.html"><a href="ridge-regression.html"><i class="fa fa-check"></i><b>10.1</b> Ridge Regression</a></li>
<li class="chapter" data-level="10.2" data-path="lasso.html"><a href="lasso.html"><i class="fa fa-check"></i><b>10.2</b> LASSO</a></li>
<li class="chapter" data-level="10.3" data-path="elastic-net.html"><a href="elastic-net.html"><i class="fa fa-check"></i><b>10.3</b> Elastic Net</a></li>
<li class="chapter" data-level="10.4" data-path="lasso-generalized-linear-model.html"><a href="lasso-generalized-linear-model.html"><i class="fa fa-check"></i><b>10.4</b> LASSO Generalized Linear Model</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tree-based-methods.html"><a href="tree-based-methods.html"><i class="fa fa-check"></i><b>11</b> Tree-Based Methods</a><ul>
<li class="chapter" data-level="11.1" data-path="splitting-criteria.html"><a href="splitting-criteria.html"><i class="fa fa-check"></i><b>11.1</b> Splitting Criteria</a></li>
<li class="chapter" data-level="11.2" data-path="tree-pruning.html"><a href="tree-pruning.html"><i class="fa fa-check"></i><b>11.2</b> Tree Pruning</a></li>
<li class="chapter" data-level="11.3" data-path="regression-and-decision-tree-basic.html"><a href="regression-and-decision-tree-basic.html"><i class="fa fa-check"></i><b>11.3</b> Regression and Decision Tree Basic</a></li>
<li class="chapter" data-level="11.4" data-path="bagging-tree-1.html"><a href="bagging-tree-1.html"><i class="fa fa-check"></i><b>11.4</b> Bagging Tree</a></li>
<li class="chapter" data-level="11.5" data-path="random-forest.html"><a href="random-forest.html"><i class="fa fa-check"></i><b>11.5</b> Random Forest</a></li>
<li class="chapter" data-level="11.6" data-path="gradient-boosted-machine.html"><a href="gradient-boosted-machine.html"><i class="fa fa-check"></i><b>11.6</b> Gradient Boosted Machine</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="neural-network.html"><a href="neural-network.html"><i class="fa fa-check"></i><b>12</b> Neural Network</a><ul>
<li class="chapter" data-level="12.1" data-path="projection-pursuit-regression.html"><a href="projection-pursuit-regression.html"><i class="fa fa-check"></i><b>12.1</b> Projection Pursuit Regression</a></li>
<li class="chapter" data-level="12.2" data-path="standard-neural-network.html"><a href="standard-neural-network.html"><i class="fa fa-check"></i><b>12.2</b> Standard Neural Network</a></li>
<li class="chapter" data-level="12.3" data-path="convolutional-neural-network.html"><a href="convolutional-neural-network.html"><i class="fa fa-check"></i><b>12.3</b> Convolutional Neural Network</a></li>
<li class="chapter" data-level="12.4" data-path="recurrent-neural-network.html"><a href="recurrent-neural-network.html"><i class="fa fa-check"></i><b>12.4</b> Recurrent Neural Network</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a><ul>
<li class="chapter" data-level="" data-path="a1-big-data-cloud-platform.html"><a href="a1-big-data-cloud-platform.html"><i class="fa fa-check"></i>A1. Big Data Cloud Platform</a><ul>
<li class="chapter" data-level="" data-path="a1-big-data-cloud-platform.html"><a href="a1-big-data-cloud-platform.html#how-data-becomes-science"><i class="fa fa-check"></i>How Data becomes Science?</a></li>
<li class="chapter" data-level="" data-path="a1-big-data-cloud-platform.html"><a href="a1-big-data-cloud-platform.html#power-of-cluster-of-computers"><i class="fa fa-check"></i>Power of Cluster of Computers</a></li>
<li class="chapter" data-level="" data-path="a1-big-data-cloud-platform.html"><a href="a1-big-data-cloud-platform.html#introduction-of-cloud-environment"><i class="fa fa-check"></i>Introduction of Cloud Environment</a></li>
<li class="chapter" data-level="" data-path="a1-big-data-cloud-platform.html"><a href="a1-big-data-cloud-platform.html#summary"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="databases-and-sql.html"><a href="databases-and-sql.html"><i class="fa fa-check"></i>Databases and SQL</a><ul>
<li class="chapter" data-level="" data-path="databases-and-sql.html"><a href="databases-and-sql.html#database-table-and-view"><i class="fa fa-check"></i>Database, Table and View</a></li>
<li class="chapter" data-level="" data-path="databases-and-sql.html"><a href="databases-and-sql.html#sample-tables"><i class="fa fa-check"></i>Sample Tables</a></li>
<li class="chapter" data-level="" data-path="databases-and-sql.html"><a href="databases-and-sql.html#basic-sql-statement"><i class="fa fa-check"></i>Basic SQL Statement</a></li>
<li class="chapter" data-level="" data-path="databases-and-sql.html"><a href="databases-and-sql.html#simple-select-statement"><i class="fa fa-check"></i>Simple SELECT Statement</a></li>
<li class="chapter" data-level="" data-path="databases-and-sql.html"><a href="databases-and-sql.html#aggregation-functions-and-group-by"><i class="fa fa-check"></i>Aggregation Functions and GROUP BY</a></li>
<li class="chapter" data-level="" data-path="databases-and-sql.html"><a href="databases-and-sql.html#join-multiple-tables"><i class="fa fa-check"></i>Join Multiple Tables</a></li>
<li class="chapter" data-level="" data-path="databases-and-sql.html"><a href="databases-and-sql.html#add-more-content-into-a-table"><i class="fa fa-check"></i>Add More Content into a Table</a></li>
<li class="chapter" data-level="" data-path="databases-and-sql.html"><a href="databases-and-sql.html#advanced-topics-in-database"><i class="fa fa-check"></i>Advanced Topics in Database</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="other-useful-topics.html"><a href="other-useful-topics.html"><i class="fa fa-check"></i>Other Useful Topics</a><ul>
<li class="chapter" data-level="" data-path="other-useful-topics.html"><a href="other-useful-topics.html#linux-operation-system"><i class="fa fa-check"></i>Linux Operation System</a></li>
<li class="chapter" data-level="" data-path="other-useful-topics.html"><a href="other-useful-topics.html#visualization"><i class="fa fa-check"></i>Visualization</a></li>
<li class="chapter" data-level="" data-path="other-useful-topics.html"><a href="other-useful-topics.html#gpu"><i class="fa fa-check"></i>GPU</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="a2-r-code-for-data-simulation.html"><a href="a2-r-code-for-data-simulation.html"><i class="fa fa-check"></i>A2. R code for data simulation</a><ul>
<li class="chapter" data-level="" data-path="a2-r-code-for-data-simulation.html"><a href="a2-r-code-for-data-simulation.html#customer-data-for-clothing-company-1"><i class="fa fa-check"></i>Customer Data for Clothing Company</a></li>
<li class="chapter" data-level="" data-path="a2-r-code-for-data-simulation.html"><a href="a2-r-code-for-data-simulation.html#customer-satisfaction-survey-data-from-airline-company-1"><i class="fa fa-check"></i>Customer Satisfaction Survey Data from Airline Company</a></li>
<li class="chapter" data-level="" data-path="a2-r-code-for-data-simulation.html"><a href="a2-r-code-for-data-simulation.html#swine-disease-breakout-data-1"><i class="fa fa-check"></i>Swine Disease Breakout Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="a2.-r-code-for-data-simulation" class="section level2 unnumbered">
<h2>A2. R code for data simulation</h2>
<div id="customer-data-for-clothing-company-1" class="section level3 unnumbered">
<h3>Customer Data for Clothing Company</h3>
<p>The simulation is not very straightforward and we will break it into three parts:</p>
<ol style="list-style-type: decimal">
<li>Define data structure: variable names, variable distribution, customer segment names, segment size</li>
<li>Variable distribution parameters: mean and variance</li>
<li>Iterate across segments and variables. Simulate data according to specific parameters assigned</li>
</ol>
<p>By organizing code this way, it makes easy for us to change specific parts of the simulation. For example, if we want to change the distribution of one variable, we can just change the corresponding part of the code.</p>
<p>Here is code to define data structure:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set a random number seed to make the process repeatable</span>
<span class="kw">set.seed</span>(<span class="dv">12345</span>)
<span class="co"># define the number of observations</span>
ncust&lt;-<span class="dv">1000</span>
<span class="co"># create a data frmae for simulated data</span>
seg_dat&lt;-<span class="kw">data.frame</span>(<span class="dt">id=</span><span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span>ncust)))
<span class="co"># assign the variable names</span>
vars&lt;-<span class="kw">c</span>(<span class="st">&quot;age&quot;</span>,<span class="st">&quot;gender&quot;</span>,<span class="st">&quot;income&quot;</span>,<span class="st">&quot;house&quot;</span>,<span class="st">&quot;store_exp&quot;</span>,<span class="st">&quot;online_exp&quot;</span>,<span class="st">&quot;store_trans&quot;</span>,<span class="st">&quot;online_trans&quot;</span>)
<span class="co"># assign distribution for each variable</span>
vartype&lt;-<span class="kw">c</span>(<span class="st">&quot;norm&quot;</span>,<span class="st">&quot;binom&quot;</span>,<span class="st">&quot;norm&quot;</span>,<span class="st">&quot;binom&quot;</span>,<span class="st">&quot;norm&quot;</span>,<span class="st">&quot;norm&quot;</span>,<span class="st">&quot;pois&quot;</span>,<span class="st">&quot;pois&quot;</span>)
<span class="co"># names of 4 segments</span>
group_name&lt;-<span class="kw">c</span>(<span class="st">&quot;Price&quot;</span>,<span class="st">&quot;Conspicuous&quot;</span>,<span class="st">&quot;Quality&quot;</span>,<span class="st">&quot;Style&quot;</span>)
<span class="co"># size of each segments</span>
group_size&lt;-<span class="kw">c</span>(<span class="dv">250</span>,<span class="dv">200</span>,<span class="dv">200</span>,<span class="dv">350</span>)</code></pre></div>
<p>The next step is to define variable distribution parameters. There are 4 segments of customers and 8 parameters. Different segments correspond to different parameters. Letâ€™s store the parameters in a 4Ã—8 matrix:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># matrix for mean</span>
mus &lt;-<span class="st"> </span><span class="kw">matrix</span>( <span class="kw">c</span>(
  <span class="co"># Price</span>
  <span class="dv">60</span>, <span class="fl">0.5</span>, <span class="dv">120000</span>,<span class="fl">0.9</span>, <span class="dv">500</span>,<span class="dv">200</span>,<span class="dv">5</span>,<span class="dv">2</span>,
  <span class="co"># Conspicuous</span>
  <span class="dv">40</span>, <span class="fl">0.7</span>, <span class="dv">200000</span>,<span class="fl">0.9</span>, <span class="dv">5000</span>,<span class="dv">5000</span>,<span class="dv">10</span>,<span class="dv">10</span>,
  <span class="co"># Quality</span>
  <span class="dv">36</span>, <span class="fl">0.5</span>, <span class="dv">70000</span>, <span class="fl">0.4</span>, <span class="dv">300</span>, <span class="dv">2000</span>,<span class="dv">2</span>,<span class="dv">15</span>,
  <span class="co"># Style</span>
  <span class="dv">25</span>, <span class="fl">0.2</span>, <span class="dv">90000</span>, <span class="fl">0.2</span>, <span class="dv">200</span>, <span class="dv">2000</span>,<span class="dv">2</span>,<span class="dv">20</span>), <span class="dt">ncol=</span><span class="kw">length</span>(vars), <span class="dt">byrow=</span><span class="ot">TRUE</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># matrix for variance</span>
sds&lt;-<span class="st"> </span><span class="kw">matrix</span>( <span class="kw">c</span>(
  <span class="co"># Price</span>
  <span class="dv">3</span>,<span class="ot">NA</span>,<span class="dv">8000</span>,<span class="ot">NA</span>,<span class="dv">100</span>,<span class="dv">50</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,
  <span class="co"># Conspicuous</span>
  <span class="dv">5</span>,<span class="ot">NA</span>,<span class="dv">50000</span>,<span class="ot">NA</span>,<span class="dv">1000</span>,<span class="dv">1500</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,
  <span class="co"># Quality</span>
  <span class="dv">7</span>,<span class="ot">NA</span>,<span class="dv">10000</span>,<span class="ot">NA</span>,<span class="dv">50</span>,<span class="dv">200</span>,<span class="ot">NA</span>,<span class="ot">NA</span>,
  <span class="co"># Style</span>
  <span class="dv">2</span>,<span class="ot">NA</span>,<span class="dv">5000</span>,<span class="ot">NA</span>,<span class="dv">10</span>,<span class="dv">500</span>,<span class="ot">NA</span>,<span class="ot">NA</span>), <span class="dt">ncol=</span><span class="kw">length</span>(vars), <span class="dt">byrow=</span><span class="ot">TRUE</span>)</code></pre></div>
<p>Now we are ready to simulate data using the parameters defined above:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># simulate non-survey data</span>
sim.dat&lt;-<span class="ot">NULL</span>
<span class="kw">set.seed</span>(<span class="dv">2016</span>)
<span class="co"># loop on customer segment (i)</span>
 <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(group_name)){
 
   <span class="co"># add this line in order to moniter the process</span>
   <span class="kw">cat</span> (i, group_name[i],<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)
 
  <span class="co"># create an empty matrix to store relevent data</span>
  seg&lt;-<span class="kw">data.frame</span>(<span class="kw">matrix</span>(<span class="ot">NA</span>,<span class="dt">nrow=</span>group_size[i], <span class="dt">ncol=</span><span class="kw">length</span>(vars)))  
 
  <span class="co"># Simulate data within segment i</span>
  <span class="cf">for</span> (j <span class="cf">in</span> <span class="kw">seq_along</span>(vars)){
 
    <span class="co"># loop on every variable (j)</span>
    <span class="cf">if</span> (vartype[j]<span class="op">==</span><span class="st">&quot;norm&quot;</span>){
      <span class="co"># simulate normal distribution</span>
      seg[,j]&lt;-<span class="kw">rnorm</span>(group_size[i], <span class="dt">mean=</span>mus[i,j], <span class="dt">sd=</span>sds[i,j])
    } <span class="cf">else</span> <span class="cf">if</span> (vartype[j]<span class="op">==</span><span class="st">&quot;pois&quot;</span>) {
      <span class="co"># simulate poisson distribution</span>
      seg[,j]&lt;-<span class="kw">rpois</span>(group_size[i], <span class="dt">lambda=</span>mus[i,j])
    } <span class="cf">else</span> <span class="cf">if</span> (vartype[j]<span class="op">==</span><span class="st">&quot;binom&quot;</span>){
      <span class="co"># simulate binomial distribution</span>
      seg[,j]&lt;-<span class="kw">rbinom</span>(group_size[i],<span class="dt">size=</span><span class="dv">1</span>,<span class="dt">prob=</span>mus[i,j])
    } <span class="cf">else</span>{
      <span class="co"># if the distribution name is not one of the above, stop and return a message</span>
      <span class="kw">stop</span> (<span class="st">&quot;Don&#39;t have type:&quot;</span>,vartype[j])
    }        
  }
  sim.dat&lt;-<span class="kw">rbind</span>(sim.dat,seg)
 }</code></pre></div>
<p>Now letâ€™s edit the data we just simulated a little by adding tags to 0/1 binomial variables:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># assign variable names</span>
<span class="kw">names</span>(sim.dat)&lt;-vars
<span class="co"># assign factor levels to segment variable</span>
sim.dat<span class="op">$</span>segment&lt;-<span class="kw">factor</span>(<span class="kw">rep</span>(group_name,<span class="dt">times=</span>group_size))
<span class="co"># recode gender and house variable</span>
sim.dat<span class="op">$</span>gender&lt;-<span class="kw">factor</span>(sim.dat<span class="op">$</span>gender, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;Female&quot;</span>,<span class="st">&quot;Male&quot;</span>))
sim.dat<span class="op">$</span>house&lt;-<span class="kw">factor</span>(sim.dat<span class="op">$</span>house, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;No&quot;</span>,<span class="st">&quot;Yes&quot;</span>))
<span class="co"># store_trans and online_trans are at least 1</span>
sim.dat<span class="op">$</span>store_trans&lt;-sim.dat<span class="op">$</span>store_trans<span class="op">+</span><span class="dv">1</span>
sim.dat<span class="op">$</span>online_trans&lt;-sim.dat<span class="op">$</span>online_trans<span class="op">+</span><span class="dv">1</span>
<span class="co"># age is integer</span>
sim.dat<span class="op">$</span>age&lt;-<span class="kw">floor</span>(sim.dat<span class="op">$</span>age)</code></pre></div>
<p>In the real world, the data always includes some noise such as missing, wrong imputation. So we will add some noise to the data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># add missing values</span>
idxm &lt;-<span class="st"> </span><span class="kw">as.logical</span>(<span class="kw">rbinom</span>(ncust, <span class="dt">size=</span><span class="dv">1</span>, <span class="dt">prob=</span>sim.dat<span class="op">$</span>age<span class="op">/</span><span class="dv">200</span>))
sim.dat<span class="op">$</span>income[idxm]&lt;-<span class="ot">NA</span>
<span class="co"># add wrong imputations and outliers</span>
<span class="kw">set.seed</span>(<span class="dv">123</span>)
idx&lt;-<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span>ncust,<span class="dv">5</span>)
sim.dat<span class="op">$</span>age[idx[<span class="dv">1</span>]]&lt;-<span class="dv">300</span>
sim.dat<span class="op">$</span>store_exp[idx[<span class="dv">2</span>]]&lt;-<span class="st"> </span><span class="op">-</span><span class="dv">500</span>
sim.dat<span class="op">$</span>store_exp[idx[<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>]]&lt;-<span class="kw">c</span>(<span class="dv">50000</span>,<span class="dv">30000</span>,<span class="dv">30000</span>)</code></pre></div>
<p>So far we have created part of the data. You can check it using <code>summary(sim.dat)</code>. Next, we will move on to simulate survey data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># number of survey questions</span>
nq&lt;-<span class="dv">10</span>
<span class="co"># mean matrix for different segments </span>
mus2 &lt;-<span class="st"> </span><span class="kw">matrix</span>( <span class="kw">c</span>(
  <span class="co"># Price</span>
 <span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">4</span>,
  <span class="co"># Conspicuous</span>
 <span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">2</span>,
  <span class="co"># Quality</span>
 <span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>,
  <span class="co"># Style</span>
 <span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">2</span>), <span class="dt">ncol=</span>nq, <span class="dt">byrow=</span><span class="ot">TRUE</span>)

<span class="co"># assume the variance is 0.2 for all</span>
sd2&lt;-<span class="fl">0.2</span>
sim.dat2&lt;-<span class="ot">NULL</span>
<span class="kw">set.seed</span>(<span class="dv">1000</span>)
<span class="co"># loop for customer segment (i)</span>
<span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(group_name)){
  <span class="co"># the following line is used for checking the progress</span>
  <span class="co"># cat (i, group_name[i],&quot;\n&quot;)</span>
  <span class="co"># create an empty data frame to store data</span>
  seg&lt;-<span class="kw">data.frame</span>(<span class="kw">matrix</span>(<span class="ot">NA</span>,<span class="dt">nrow=</span>group_size[i], <span class="dt">ncol=</span>nq))  
  <span class="co"># simulate data within segment</span>
  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>nq){
    <span class="co"># simulate normal distribution</span>
    res&lt;-<span class="kw">rnorm</span>(group_size[i], <span class="dt">mean=</span>mus2[i,j], <span class="dt">sd=</span>sd2)
    <span class="co"># set upper and lower limit</span>
    res[res<span class="op">&gt;</span><span class="dv">5</span>]&lt;-<span class="dv">5</span>
    res[res<span class="op">&lt;</span><span class="dv">1</span>]&lt;-<span class="dv">1</span>
    <span class="co"># convert continuous values to discrete integers</span>
    seg[,j]&lt;-<span class="kw">floor</span>(res)
  }
  sim.dat2&lt;-<span class="kw">rbind</span>(sim.dat2,seg)
}

<span class="kw">names</span>(sim.dat2)&lt;-<span class="kw">paste</span>(<span class="st">&quot;Q&quot;</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,<span class="dt">sep=</span><span class="st">&quot;&quot;</span>)
sim.dat&lt;-<span class="kw">cbind</span>(sim.dat,sim.dat2)
sim.dat<span class="op">$</span>segment&lt;-<span class="kw">factor</span>(<span class="kw">rep</span>(group_name,<span class="dt">times=</span>group_size))</code></pre></div>
</div>
<div id="customer-satisfaction-survey-data-from-airline-company-1" class="section level3 unnumbered">
<h3>Customer Satisfaction Survey Data from Airline Company</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a matrix of factor loadings</span>
<span class="co"># This pattern is called bifactor because it has a general factor for separate components.</span>
<span class="co"># For example, &quot;Ease of making reservation&quot; has general factor loading 0.33, specific factor loading 0.58</span>
<span class="co"># The outcome variables are formed as combinations of these general and specific factors</span>
loadings &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span> (
  <span class="co"># Ticketing</span>
  .<span class="dv">33</span>, .<span class="dv">58</span>, .<span class="dv">00</span>, .<span class="dv">00</span>,  <span class="co"># Ease of making reservation </span>
  .<span class="dv">35</span>, .<span class="dv">55</span>, .<span class="dv">00</span>, .<span class="dv">00</span>,  <span class="co"># Availability of preferred seats</span>
  .<span class="dv">30</span>, .<span class="dv">52</span>, .<span class="dv">00</span>, .<span class="dv">00</span>,  <span class="co"># Variety of flight options</span>
  .<span class="dv">40</span>, .<span class="dv">50</span>, .<span class="dv">00</span>, .<span class="dv">00</span>,  <span class="co"># Ticket prices</span>
  <span class="co"># Aircraft</span>
  .<span class="dv">50</span>, .<span class="dv">00</span>, .<span class="dv">55</span>, .<span class="dv">00</span>,  <span class="co"># Seat comfort</span>
  .<span class="dv">41</span>, .<span class="dv">00</span>, .<span class="dv">51</span>, .<span class="dv">00</span>,  <span class="co"># Roominess of seat area</span>
  .<span class="dv">45</span>, .<span class="dv">00</span>, .<span class="dv">57</span>, .<span class="dv">00</span>,  <span class="co"># Availability of Overhead</span>
  .<span class="dv">32</span>, .<span class="dv">00</span>, .<span class="dv">54</span>, .<span class="dv">00</span>,  <span class="co"># Cleanliness of aircraft</span>
  <span class="co"># Service</span>
  .<span class="dv">35</span>, .<span class="dv">00</span>, .<span class="dv">00</span>, .<span class="dv">50</span>,  <span class="co"># Courtesy of flight attendant</span>
  .<span class="dv">38</span>, .<span class="dv">00</span>, .<span class="dv">00</span>, .<span class="dv">57</span>,  <span class="co"># Friendliness</span>
  .<span class="dv">60</span>, .<span class="dv">00</span>, .<span class="dv">00</span>, .<span class="dv">50</span>,  <span class="co"># Helpfulness</span>
  .<span class="dv">52</span>, .<span class="dv">00</span>, .<span class="dv">00</span>, .<span class="dv">58</span>,  <span class="co"># Food and drinks</span>
  <span class="co"># General   </span>
  .<span class="dv">43</span>, .<span class="dv">10</span>, .<span class="dv">30</span>, .<span class="dv">30</span>,  <span class="co"># Overall satisfaction</span>
  .<span class="dv">35</span>, .<span class="dv">50</span>, .<span class="dv">40</span>, .<span class="dv">20</span>,  <span class="co"># Purchase again</span>
  .<span class="dv">25</span>, .<span class="dv">50</span>, .<span class="dv">50</span>, .<span class="dv">20</span>), <span class="co"># Willingness to recommend</span>
  <span class="dt">nrow=</span><span class="dv">15</span>,<span class="dt">ncol=</span><span class="dv">4</span>, <span class="dt">byrow=</span><span class="ot">TRUE</span>)
  
<span class="co"># Matrix multiplication produces the correlation matrix except for the diagonal</span>
cor_matrix&lt;-loadings <span class="op">%*%</span><span class="st"> </span><span class="kw">t</span>(loadings)
<span class="co"># Diagonal set to ones</span>
<span class="kw">diag</span>(cor_matrix)&lt;-<span class="dv">1</span>

<span class="co"># use the mvtnorm package to randomly generate a data set with a given correlation pattern</span>

<span class="kw">library</span>(mvtnorm)
<span class="co"># mean vectors of the 3 airline companies</span>
mu1=<span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">6</span>, <span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">6</span>,<span class="dv">7</span>, <span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">5</span>, <span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">6</span>)
mu2=<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>, <span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>, <span class="dv">8</span>,<span class="dv">8</span>,<span class="dv">8</span>,<span class="dv">8</span>, <span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>)
mu3=<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>, <span class="dv">8</span>,<span class="dv">8</span>,<span class="dv">8</span>,<span class="dv">8</span>, <span class="dv">8</span>,<span class="dv">8</span>,<span class="dv">8</span>,<span class="dv">8</span>, <span class="dv">8</span>,<span class="dv">8</span>,<span class="dv">8</span>)

<span class="co"># set random seed</span>
<span class="kw">set.seed</span>(<span class="dv">123456</span>) 
<span class="co"># respondent ID</span>
resp.id &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">1000</span> 

<span class="kw">library</span>(MASS) 
rating1 &lt;-<span class="st"> </span><span class="kw">mvrnorm</span>(<span class="kw">length</span>(resp.id),
                     <span class="dt">mu=</span>mu1,
                     <span class="dt">Sigma=</span>cor_matrix)
rating2 &lt;-<span class="st"> </span><span class="kw">mvrnorm</span>(<span class="kw">length</span>(resp.id),
                   <span class="dt">mu=</span>mu2,
                   <span class="dt">Sigma=</span>cor_matrix)
rating3 &lt;-<span class="st"> </span><span class="kw">mvrnorm</span>(<span class="kw">length</span>(resp.id),
                   <span class="dt">mu=</span>mu3,
                   <span class="dt">Sigma=</span>cor_matrix)


<span class="co"># truncates scale to be between 1 and 9</span>
rating1[rating1<span class="op">&gt;</span><span class="dv">9</span>]&lt;-<span class="dv">9</span>
rating1[rating1<span class="op">&lt;</span><span class="dv">1</span>]&lt;-<span class="dv">1</span>
rating2[rating2<span class="op">&gt;</span><span class="dv">9</span>]&lt;-<span class="dv">9</span>
rating2[rating2<span class="op">&lt;</span><span class="dv">1</span>]&lt;-<span class="dv">1</span>
rating3[rating3<span class="op">&gt;</span><span class="dv">9</span>]&lt;-<span class="dv">9</span>
rating3[rating3<span class="op">&lt;</span><span class="dv">1</span>]&lt;-<span class="dv">1</span>

<span class="co"># Round to single digit</span>
rating1&lt;-<span class="kw">data.frame</span>(<span class="kw">round</span>(rating1,<span class="dv">0</span>))
rating2&lt;-<span class="kw">data.frame</span>(<span class="kw">round</span>(rating2,<span class="dv">0</span>))
rating3&lt;-<span class="kw">data.frame</span>(<span class="kw">round</span>(rating3,<span class="dv">0</span>))
rating1<span class="op">$</span>ID&lt;-resp.id
rating2<span class="op">$</span>ID&lt;-resp.id
rating3<span class="op">$</span>ID&lt;-resp.id
rating1<span class="op">$</span>Airline&lt;-<span class="kw">rep</span>(<span class="st">&quot;AirlineCo.1&quot;</span>,<span class="kw">length</span>(resp.id))
rating2<span class="op">$</span>Airline&lt;-<span class="kw">rep</span>(<span class="st">&quot;AirlineCo.2&quot;</span>,<span class="kw">length</span>(resp.id))
rating3<span class="op">$</span>Airline&lt;-<span class="kw">rep</span>(<span class="st">&quot;AirlineCo.3&quot;</span>,<span class="kw">length</span>(resp.id))
rating&lt;-<span class="kw">rbind</span>(rating1,rating2,rating3)

<span class="co"># assign names to the variables in the data frame</span>
<span class="kw">names</span>(rating)&lt;-<span class="kw">c</span>(
  <span class="st">&quot;Easy_Reservation&quot;</span>,
  <span class="st">&quot;Preferred_Seats&quot;</span>,
  <span class="st">&quot;Flight_Options&quot;</span>,
  <span class="st">&quot;Ticket_Prices&quot;</span>,
  <span class="st">&quot;Seat_Comfort&quot;</span>,
  <span class="st">&quot;Seat_Roominess&quot;</span>,
  <span class="st">&quot;Overhead_Storage&quot;</span>,
  <span class="st">&quot;Clean_Aircraft&quot;</span>,
  <span class="st">&quot;Courtesy&quot;</span>,
  <span class="st">&quot;Friendliness&quot;</span>,
  <span class="st">&quot;Helpfulness&quot;</span>,
  <span class="st">&quot;Service&quot;</span>,
  <span class="st">&quot;Satisfaction&quot;</span>,
  <span class="st">&quot;Fly_Again&quot;</span>,
  <span class="st">&quot;Recommend&quot;</span>,
  <span class="st">&quot;ID&quot;</span>,
  <span class="st">&quot;Airline&quot;</span>)</code></pre></div>
</div>
<div id="swine-disease-breakout-data-1" class="section level3 unnumbered">
<h3>Swine Disease Breakout Data</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># sim1_da1.csv the 1st simulated data similar sim1_da2 and sim1_da3</span>
<span class="co"># sim1.csv simulated data, the first simulation dummy.sim1.csv dummy</span>
<span class="co"># variables for the first simulated data with all the baseline code for</span>
<span class="co"># simulation</span>

<span class="co"># setwd(dirname(file.choose())) library(grplasso)</span>

nf &lt;-<span class="st"> </span><span class="dv">800</span>
<span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">20</span>) {
    <span class="kw">set.seed</span>(<span class="dv">19870</span> <span class="op">+</span><span class="st"> </span>j)
    x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>)
    sim.da1 &lt;-<span class="st"> </span><span class="ot">NULL</span>
    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>nf) {
        <span class="co"># sample(x, 120, replace=TRUE)-&gt;sam</span>
        sim.da1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(sim.da1, <span class="kw">sample</span>(x, <span class="dv">120</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>))
    }
    
    sim.da1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(sim.da1)
    col &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Q&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">120</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)
    row &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Farm&quot;</span>, <span class="dv">1</span><span class="op">:</span>nf, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)
    <span class="kw">colnames</span>(sim.da1) &lt;-<span class="st"> </span>col
    <span class="kw">rownames</span>(sim.da1) &lt;-<span class="st"> </span>row
    
    <span class="co"># use class.ind() function in nnet package to encode dummy variables</span>
    <span class="kw">library</span>(nnet)
    dummy.sim1 &lt;-<span class="st"> </span><span class="ot">NULL</span>
    <span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(sim.da1)) {
        tmp =<span class="st"> </span><span class="kw">class.ind</span>(sim.da1[, k])
        <span class="kw">colnames</span>(tmp) =<span class="st"> </span><span class="kw">paste</span>(col[k], <span class="kw">colnames</span>(tmp))
        dummy.sim1 =<span class="st"> </span><span class="kw">cbind</span>(dummy.sim1, tmp)
    }
    dummy.sim1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(dummy.sim1)
    
    <span class="co"># set &#39;C&#39; as the baseline delete baseline dummy variable</span>
    
    base.idx &lt;-<span class="st"> </span><span class="dv">3</span> <span class="op">*</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">120</span>)
    dummy1 &lt;-<span class="st"> </span>dummy.sim1[, <span class="op">-</span>base.idx]
    
    <span class="co"># simulate independent variable for different values of r simulate</span>
    <span class="co"># based on one value of r each time r=0.1, get the link function</span>
    s1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="op">-</span><span class="dv">1</span><span class="op">/</span><span class="dv">10</span>), <span class="dv">40</span>), <span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">0</span>), <span class="dv">40</span>), <span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">0</span>, 
        <span class="dv">0</span>, <span class="dv">0</span>), <span class="dv">40</span>))
    link1 &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(dummy.sim1) <span class="op">%*%</span><span class="st"> </span>s1 <span class="op">-</span><span class="st"> </span><span class="dv">40</span><span class="op">/</span><span class="dv">3</span><span class="op">/</span><span class="dv">10</span>
    
    <span class="co"># r=0.25</span>
    <span class="co"># c(rep(c(1/4,0,-1/4),40),rep(c(1/4,0,0),40),rep(c(0,0,0),40))-&gt;s1</span>
    <span class="co"># as.matrix(dummy.sim1)%*%s1-40/3/4-&gt;link1</span>
    
    <span class="co"># r=0.5</span>
    <span class="co"># c(rep(c(1/2,0,-1/2),40),rep(c(1/2,0,0),40),rep(c(0,0,0),40))-&gt;s1</span>
    <span class="co"># as.matrix(dummy.sim1)%*%s1-40/3/2-&gt;link1</span>
    
    <span class="co"># r=1 c(rep(c(1,0,-1),40),rep(c(1,0,0),40),rep(c(0,0,0),40))-&gt;s1</span>
    <span class="co"># as.matrix(dummy.sim1)%*%s1-40/3-&gt;link1</span>
    
    <span class="co"># r=2 c(rep(c(2,0,-2),40),rep(c(2,0,0),40),rep(c(0,0,0),40))-&gt;s1</span>
    <span class="co"># as.matrix(dummy.sim1)%*%s1-40/3/0.5-&gt;link1</span>
    
    
    <span class="co"># calculate the outbreak probability</span>
    hp1 &lt;-<span class="st"> </span><span class="kw">exp</span>(link1)<span class="op">/</span>(<span class="kw">exp</span>(link1) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)
    
    <span class="co"># based on the probability hp1, simulate response variable: res</span>
    res &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">9</span>, nf)
    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>nf) {
        res[i] &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">0</span>), <span class="dv">1</span>, <span class="dt">prob =</span> <span class="kw">c</span>(hp1[i], <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>hp1[i]))
    }
    
    <span class="co"># da1 with response variable, without group indicator da2 without</span>
    <span class="co"># response variable, with group indicator da3 without response</span>
    <span class="co"># variable, without group indicator</span>
    
    dummy1<span class="op">$</span>y &lt;-<span class="st"> </span>res
    da1 &lt;-<span class="st"> </span>dummy1
    y &lt;-<span class="st"> </span>da1<span class="op">$</span>y
    ind &lt;-<span class="st"> </span><span class="ot">NULL</span>
    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">120</span>) {
        ind &lt;-<span class="st"> </span><span class="kw">c</span>(ind, <span class="kw">rep</span>(i, <span class="dv">2</span>))
    }
    
    da2 &lt;-<span class="st"> </span><span class="kw">rbind</span>(da1[, <span class="dv">1</span><span class="op">:</span><span class="dv">240</span>], ind)
    da3 &lt;-<span class="st"> </span>da1[, <span class="dv">1</span><span class="op">:</span><span class="dv">240</span>]
    
    <span class="co"># save simulated data</span>
    <span class="kw">write.csv</span>(da1, <span class="kw">paste</span>(<span class="st">&quot;sim&quot;</span>, j, <span class="st">&quot;_da&quot;</span>, <span class="dv">1</span>, <span class="st">&quot;.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>), <span class="dt">row.names =</span> F)
    <span class="kw">write.csv</span>(da2, <span class="kw">paste</span>(<span class="st">&quot;sim&quot;</span>, j, <span class="st">&quot;_da&quot;</span>, <span class="dv">2</span>, <span class="st">&quot;.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>), <span class="dt">row.names =</span> F)
    <span class="kw">write.csv</span>(da3, <span class="kw">paste</span>(<span class="st">&quot;sim&quot;</span>, j, <span class="st">&quot;_da&quot;</span>, <span class="dv">3</span>, <span class="st">&quot;.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>), <span class="dt">row.names =</span> F)
    <span class="kw">write.csv</span>(sim.da1, <span class="kw">paste</span>(<span class="st">&quot;sim&quot;</span>, j, <span class="st">&quot;.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>), <span class="dt">row.names =</span> F)
    <span class="kw">write.csv</span>(dummy.sim1, <span class="kw">paste</span>(<span class="st">&quot;dummy.sim&quot;</span>, j, <span class="st">&quot;.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>), <span class="dt">row.names =</span> F)
}</code></pre></div>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="other-useful-topics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/happyrabbit/IntroDataScience/19-Appendix.Rmd",
"text": "Edit"
},
"download": ["IDS.pdf", "IDS.epub", "IDS.mobi"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
