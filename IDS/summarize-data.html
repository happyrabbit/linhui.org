<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.1 Summarize Data | Introduction to Data Science</title>
  <meta name="description" content="6.1 Summarize Data | Introduction to Data Science" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="6.1 Summarize Data | Introduction to Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://scientistcafe.com/IDS/" />
  
  <meta property="og:description" content="6.1 Summarize Data | Introduction to Data Science" />
  <meta name="github-repo" content="happyrabbit/IntroDataScience" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.1 Summarize Data | Introduction to Data Science" />
  
  <meta name="twitter:description" content="6.1 Summarize Data | Introduction to Data Science" />
  

<meta name="author" content="Hui Lin and Ming Li" />


<meta name="date" content="2022-10-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="datawrangline.html"/>
<link rel="next" href="tidy-and-reshape-data.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://scientistcafe.com">Homepage</a></li>

<li class="divider"></li>
<li><a href="index.html#preface">Preface<span></span></a>
<ul>
<li><a href="goal-of-the-book.html#goal-of-the-book">Goal of the Book<span></span></a></li>
<li><a href="what-this-book-covers.html#what-this-book-covers">What This Book Covers<span></span></a></li>
<li><a href="who-this-book-is-for.html#who-this-book-is-for">Who This Book Is For<span></span></a></li>
<li><a href="how-to-use-this-book.html#how-to-use-this-book">How to Use This Book<span></span></a>
<ul>
<li><a href="how-to-use-this-book.html#what-the-book-assumes">What the book assumes<span></span></a></li>
<li><a href="how-to-use-this-book.html#how-to-run-r-and-python-code">How to run R and Python code<span></span></a></li>
</ul></li>
<li><a href="complementary-reading.html#complementary-reading">Complementary Reading<span></span></a></li>
</ul></li>
<li><a href="about-the-authors.html#about-the-authors">About the Authors<span></span></a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="a-brief-history-of-data-science.html"><a href="a-brief-history-of-data-science.html"><i class="fa fa-check"></i><b>1.1</b> A brief history of data science<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="data-science-role-and-skill-tracks.html"><a href="data-science-role-and-skill-tracks.html"><i class="fa fa-check"></i><b>1.2</b> Data science role and skill tracks<span></span></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="data-science-role-and-skill-tracks.html"><a href="data-science-role-and-skill-tracks.html#engineering"><i class="fa fa-check"></i><b>1.2.1</b> Engineering<span></span></a></li>
<li class="chapter" data-level="1.2.2" data-path="data-science-role-and-skill-tracks.html"><a href="data-science-role-and-skill-tracks.html#analysis"><i class="fa fa-check"></i><b>1.2.2</b> Analysis<span></span></a></li>
<li class="chapter" data-level="1.2.3" data-path="data-science-role-and-skill-tracks.html"><a href="data-science-role-and-skill-tracks.html#modelinginference"><i class="fa fa-check"></i><b>1.2.3</b> Modeling/inference<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="what-kind-of-questions-can-data-science-solve.html"><a href="what-kind-of-questions-can-data-science-solve.html"><i class="fa fa-check"></i><b>1.3</b> What kind of questions can data science solve?<span></span></a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="what-kind-of-questions-can-data-science-solve.html"><a href="what-kind-of-questions-can-data-science-solve.html#prerequisites"><i class="fa fa-check"></i><b>1.3.1</b> Prerequisites<span></span></a></li>
<li class="chapter" data-level="1.3.2" data-path="what-kind-of-questions-can-data-science-solve.html"><a href="what-kind-of-questions-can-data-science-solve.html#problem-type"><i class="fa fa-check"></i><b>1.3.2</b> Problem type<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="structure-of-data-science-team.html"><a href="structure-of-data-science-team.html"><i class="fa fa-check"></i><b>1.4</b> Structure of data science team<span></span></a></li>
<li class="chapter" data-level="1.5" data-path="data-science-roles.html"><a href="data-science-roles.html"><i class="fa fa-check"></i><b>1.5</b> Data science roles<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="SoftSkillsforDataScientists.html"><a href="SoftSkillsforDataScientists.html"><i class="fa fa-check"></i><b>2</b> Soft Skills for Data Scientists<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="comparison-between-statistician-and-data-scientist.html"><a href="comparison-between-statistician-and-data-scientist.html"><i class="fa fa-check"></i><b>2.1</b> Comparison between Statistician and Data Scientist<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="beyond-data-and-analytics.html"><a href="beyond-data-and-analytics.html"><i class="fa fa-check"></i><b>2.2</b> Beyond Data and Analytics<span></span></a></li>
<li class="chapter" data-level="2.3" data-path="three-pillars-of-knowledge.html"><a href="three-pillars-of-knowledge.html"><i class="fa fa-check"></i><b>2.3</b> Three Pillars of Knowledge<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html"><i class="fa fa-check"></i><b>2.4</b> Data Science Project Cycle<span></span></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html#types-of-data-science-projects"><i class="fa fa-check"></i><b>2.4.1</b> Types of Data Science Projects<span></span></a></li>
<li class="chapter" data-level="2.4.2" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html#ProblemFormulationandProjectPlanningStage"><i class="fa fa-check"></i><b>2.4.2</b> Problem Formulation and Project Planning Stage<span></span></a></li>
<li class="chapter" data-level="2.4.3" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html#project-modeling-stage"><i class="fa fa-check"></i><b>2.4.3</b> Project Modeling Stage<span></span></a></li>
<li class="chapter" data-level="2.4.4" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html#ModelImplementationandPostProductionStage"><i class="fa fa-check"></i><b>2.4.4</b> Model Implementation and Post Production Stage<span></span></a></li>
<li class="chapter" data-level="2.4.5" data-path="data-science-project-cycle.html"><a href="data-science-project-cycle.html#ProjectCycleSummary"><i class="fa fa-check"></i><b>2.4.5</b> Project Cycle Summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html"><i class="fa fa-check"></i><b>2.5</b> Common Mistakes in Data Science<span></span></a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html#problem-formulation-stage"><i class="fa fa-check"></i><b>2.5.1</b> Problem Formulation Stage<span></span></a></li>
<li class="chapter" data-level="2.5.2" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html#project-planning-stage"><i class="fa fa-check"></i><b>2.5.2</b> Project Planning Stage<span></span></a></li>
<li class="chapter" data-level="2.5.3" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html#project-modeling-stage-1"><i class="fa fa-check"></i><b>2.5.3</b> Project Modeling Stage<span></span></a></li>
<li class="chapter" data-level="2.5.4" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html#model-implementation-and-post-production-stage"><i class="fa fa-check"></i><b>2.5.4</b> Model Implementation and Post Production Stage<span></span></a></li>
<li class="chapter" data-level="2.5.5" data-path="common-mistakes-in-data-science.html"><a href="common-mistakes-in-data-science.html#summary-of-common-mistakes"><i class="fa fa-check"></i><b>2.5.5</b> Summary of Common Mistakes<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction-to-the-data.html"><a href="introduction-to-the-data.html"><i class="fa fa-check"></i><b>3</b> Introduction to The Data<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="customer-data-for-a-clothing-company.html"><a href="customer-data-for-a-clothing-company.html"><i class="fa fa-check"></i><b>3.1</b> Customer Data for A Clothing Company<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="swinediseasedata.html"><a href="swinediseasedata.html"><i class="fa fa-check"></i><b>3.2</b> Swine Disease Breakout Data<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="mnist-dataset.html"><a href="mnist-dataset.html"><i class="fa fa-check"></i><b>3.3</b> MNIST Dataset<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="imdb-dataset.html"><a href="imdb-dataset.html"><i class="fa fa-check"></i><b>3.4</b> IMDB Dataset<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="bigdatacloudplatform.html"><a href="bigdatacloudplatform.html"><i class="fa fa-check"></i><b>4</b> Big Data Cloud Platform<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="power-of-cluster-of-computers.html"><a href="power-of-cluster-of-computers.html"><i class="fa fa-check"></i><b>4.1</b> Power of Cluster of Computers<span></span></a></li>
<li class="chapter" data-level="4.2" data-path="evolution-of-cluster-computing.html"><a href="evolution-of-cluster-computing.html"><i class="fa fa-check"></i><b>4.2</b> Evolution of Cluster Computing<span></span></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="evolution-of-cluster-computing.html"><a href="evolution-of-cluster-computing.html#hadoop"><i class="fa fa-check"></i><b>4.2.1</b> Hadoop<span></span></a></li>
<li class="chapter" data-level="4.2.2" data-path="evolution-of-cluster-computing.html"><a href="evolution-of-cluster-computing.html#spark"><i class="fa fa-check"></i><b>4.2.2</b> Spark<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="CloudEnvironment.html"><a href="CloudEnvironment.html"><i class="fa fa-check"></i><b>4.3</b> Introduction of Cloud Environment<span></span></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="CloudEnvironment.html"><a href="CloudEnvironment.html#open-account-and-create-a-cluster"><i class="fa fa-check"></i><b>4.3.1</b> Open Account and Create a Cluster<span></span></a></li>
<li class="chapter" data-level="4.3.2" data-path="CloudEnvironment.html"><a href="CloudEnvironment.html#r-notebook"><i class="fa fa-check"></i><b>4.3.2</b> R Notebook<span></span></a></li>
<li class="chapter" data-level="4.3.3" data-path="CloudEnvironment.html"><a href="CloudEnvironment.html#markdown-cells"><i class="fa fa-check"></i><b>4.3.3</b> Markdown Cells<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="leveragesparkr.html"><a href="leveragesparkr.html"><i class="fa fa-check"></i><b>4.4</b> Leverage Spark Using R Notebook<span></span></a></li>
<li class="chapter" data-level="4.5" data-path="databases-and-sql.html"><a href="databases-and-sql.html"><i class="fa fa-check"></i><b>4.5</b> Databases and SQL<span></span></a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="databases-and-sql.html"><a href="databases-and-sql.html#history"><i class="fa fa-check"></i><b>4.5.1</b> History<span></span></a></li>
<li class="chapter" data-level="4.5.2" data-path="databases-and-sql.html"><a href="databases-and-sql.html#database-table-and-view"><i class="fa fa-check"></i><b>4.5.2</b> Database, Table and View<span></span></a></li>
<li class="chapter" data-level="4.5.3" data-path="databases-and-sql.html"><a href="databases-and-sql.html#basic-sql-statement"><i class="fa fa-check"></i><b>4.5.3</b> Basic SQL Statement<span></span></a></li>
<li class="chapter" data-level="4.5.4" data-path="databases-and-sql.html"><a href="databases-and-sql.html#advanced-topics-in-database"><i class="fa fa-check"></i><b>4.5.4</b> Advanced Topics in Database<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="datapreprocessing.html"><a href="datapreprocessing.html"><i class="fa fa-check"></i><b>5</b> Data Pre-processing<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>5.1</b> Data Cleaning<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>5.2</b> Missing Values<span></span></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="missing-values.html"><a href="missing-values.html#impute-missing-values-with-medianmode"><i class="fa fa-check"></i><b>5.2.1</b> Impute missing values with median/mode<span></span></a></li>
<li class="chapter" data-level="5.2.2" data-path="missing-values.html"><a href="missing-values.html#k-nearest-neighbors"><i class="fa fa-check"></i><b>5.2.2</b> K-nearest neighbors<span></span></a></li>
<li class="chapter" data-level="5.2.3" data-path="missing-values.html"><a href="missing-values.html#bagging-tree"><i class="fa fa-check"></i><b>5.2.3</b> Bagging Tree<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="centering-and-scaling.html"><a href="centering-and-scaling.html"><i class="fa fa-check"></i><b>5.3</b> Centering and Scaling<span></span></a></li>
<li class="chapter" data-level="5.4" data-path="resolve-skewness.html"><a href="resolve-skewness.html"><i class="fa fa-check"></i><b>5.4</b> Resolve Skewness<span></span></a></li>
<li class="chapter" data-level="5.5" data-path="outliers.html"><a href="outliers.html"><i class="fa fa-check"></i><b>5.5</b> Resolve Outliers<span></span></a></li>
<li class="chapter" data-level="5.6" data-path="collinearity.html"><a href="collinearity.html"><i class="fa fa-check"></i><b>5.6</b> Collinearity<span></span></a></li>
<li class="chapter" data-level="5.7" data-path="sparse-variables.html"><a href="sparse-variables.html"><i class="fa fa-check"></i><b>5.7</b> Sparse Variables<span></span></a></li>
<li class="chapter" data-level="5.8" data-path="re-encode-dummy-variables.html"><a href="re-encode-dummy-variables.html"><i class="fa fa-check"></i><b>5.8</b> Re-encode Dummy Variables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="datawrangline.html"><a href="datawrangline.html"><i class="fa fa-check"></i><b>6</b> Data Wrangling<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="summarize-data.html"><a href="summarize-data.html"><i class="fa fa-check"></i><b>6.1</b> Summarize Data<span></span></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="summarize-data.html"><a href="summarize-data.html#dplyr-package"><i class="fa fa-check"></i><b>6.1.1</b> <code>dplyr</code> package<span></span></a></li>
<li class="chapter" data-level="6.1.2" data-path="summarize-data.html"><a href="summarize-data.html#applyfamilyinbaser"><i class="fa fa-check"></i><b>6.1.2</b> <code>apply()</code>, <code>lapply()</code> and <code>sapply()</code> in base R<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="tidy-and-reshape-data.html"><a href="tidy-and-reshape-data.html"><i class="fa fa-check"></i><b>6.2</b> Tidy and Reshape Data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="modeltuningstrategy.html"><a href="modeltuningstrategy.html"><i class="fa fa-check"></i><b>7</b> Model Tuning Strategy<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="vbtradeoff.html"><a href="vbtradeoff.html"><i class="fa fa-check"></i><b>7.1</b> Variance-Bias Trade-Off<span></span></a></li>
<li class="chapter" data-level="7.2" data-path="datasplittingresampling.html"><a href="datasplittingresampling.html"><i class="fa fa-check"></i><b>7.2</b> Data Splitting and Resampling<span></span></a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="datasplittingresampling.html"><a href="datasplittingresampling.html#datasplitting"><i class="fa fa-check"></i><b>7.2.1</b> Data Splitting<span></span></a></li>
<li class="chapter" data-level="7.2.2" data-path="datasplittingresampling.html"><a href="datasplittingresampling.html#resampling"><i class="fa fa-check"></i><b>7.2.2</b> Resampling<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="measuring-performance.html"><a href="measuring-performance.html"><i class="fa fa-check"></i><b>8</b> Measuring Performance<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="regression-model-performance.html"><a href="regression-model-performance.html"><i class="fa fa-check"></i><b>8.1</b> Regression Model Performance<span></span></a></li>
<li class="chapter" data-level="8.2" data-path="classification-model-performance.html"><a href="classification-model-performance.html"><i class="fa fa-check"></i><b>8.2</b> Classification Model Performance<span></span></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="classification-model-performance.html"><a href="classification-model-performance.html#confusion-matrix"><i class="fa fa-check"></i><b>8.2.1</b> Confusion Matrix<span></span></a></li>
<li class="chapter" data-level="8.2.2" data-path="classification-model-performance.html"><a href="classification-model-performance.html#kappa-statistic"><i class="fa fa-check"></i><b>8.2.2</b> Kappa Statistic<span></span></a></li>
<li class="chapter" data-level="8.2.3" data-path="classification-model-performance.html"><a href="classification-model-performance.html#roc"><i class="fa fa-check"></i><b>8.2.3</b> ROC<span></span></a></li>
<li class="chapter" data-level="8.2.4" data-path="classification-model-performance.html"><a href="classification-model-performance.html#gain-and-lift-charts"><i class="fa fa-check"></i><b>8.2.4</b> Gain and Lift Charts<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression-models.html"><a href="regression-models.html"><i class="fa fa-check"></i><b>9</b> Regression Models<span></span></a>
<ul>
<li class="chapter" data-level="9.1" data-path="ordinary-least-square.html"><a href="ordinary-least-square.html"><i class="fa fa-check"></i><b>9.1</b> Ordinary Least Square<span></span></a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="ordinary-least-square.html"><a href="ordinary-least-square.html#the-magic-p-value"><i class="fa fa-check"></i><b>9.1.1</b> The Magic P-value<span></span></a></li>
<li class="chapter" data-level="9.1.2" data-path="ordinary-least-square.html"><a href="ordinary-least-square.html#diagnostics-for-linear-regression"><i class="fa fa-check"></i><b>9.1.2</b> Diagnostics for Linear Regression<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="principal-component-regression-and-partial-least-square.html"><a href="principal-component-regression-and-partial-least-square.html"><i class="fa fa-check"></i><b>9.2</b> Principal Component Regression and Partial Least Square<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regularization-methods.html"><a href="regularization-methods.html"><i class="fa fa-check"></i><b>10</b> Regularization Methods<span></span></a>
<ul>
<li class="chapter" data-level="10.1" data-path="ridge-regression.html"><a href="ridge-regression.html"><i class="fa fa-check"></i><b>10.1</b> Ridge Regression<span></span></a></li>
<li class="chapter" data-level="10.2" data-path="lasso.html"><a href="lasso.html"><i class="fa fa-check"></i><b>10.2</b> LASSO<span></span></a></li>
<li class="chapter" data-level="10.3" data-path="elastic-net.html"><a href="elastic-net.html"><i class="fa fa-check"></i><b>10.3</b> Elastic Net<span></span></a></li>
<li class="chapter" data-level="10.4" data-path="penalized-generalized-linear-model.html"><a href="penalized-generalized-linear-model.html"><i class="fa fa-check"></i><b>10.4</b> Penalized Generalized Linear Model<span></span></a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="penalized-generalized-linear-model.html"><a href="penalized-generalized-linear-model.html#introduction-to-glmnet-package"><i class="fa fa-check"></i><b>10.4.1</b> Introduction to <code>glmnet</code> package<span></span></a></li>
<li class="chapter" data-level="10.4.2" data-path="penalized-generalized-linear-model.html"><a href="penalized-generalized-linear-model.html#penalized-logistic-regression"><i class="fa fa-check"></i><b>10.4.2</b> Penalized logistic regression<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="treemodel.html"><a href="treemodel.html"><i class="fa fa-check"></i><b>11</b> Tree-Based Methods<span></span></a>
<ul>
<li class="chapter" data-level="11.1" data-path="tree-basics.html"><a href="tree-basics.html"><i class="fa fa-check"></i><b>11.1</b> Tree Basics<span></span></a></li>
<li class="chapter" data-level="11.2" data-path="splitting-criteria.html"><a href="splitting-criteria.html"><i class="fa fa-check"></i><b>11.2</b> Splitting Criteria<span></span></a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="splitting-criteria.html"><a href="splitting-criteria.html#gini-impurity"><i class="fa fa-check"></i><b>11.2.1</b> Gini impurity<span></span></a></li>
<li class="chapter" data-level="11.2.2" data-path="splitting-criteria.html"><a href="splitting-criteria.html#information-gain-ig"><i class="fa fa-check"></i><b>11.2.2</b> Information Gain (IG)<span></span></a></li>
<li class="chapter" data-level="11.2.3" data-path="splitting-criteria.html"><a href="splitting-criteria.html#information-gain-ratio-igr"><i class="fa fa-check"></i><b>11.2.3</b> Information Gain Ratio (IGR)<span></span></a></li>
<li class="chapter" data-level="11.2.4" data-path="splitting-criteria.html"><a href="splitting-criteria.html#sum-of-squared-error-sse"><i class="fa fa-check"></i><b>11.2.4</b> Sum of Squared Error (SSE)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="tree-pruning.html"><a href="tree-pruning.html"><i class="fa fa-check"></i><b>11.3</b> Tree Pruning<span></span></a></li>
<li class="chapter" data-level="11.4" data-path="regression-and-decision-tree-basic.html"><a href="regression-and-decision-tree-basic.html"><i class="fa fa-check"></i><b>11.4</b> Regression and Decision Tree Basic<span></span></a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="regression-and-decision-tree-basic.html"><a href="regression-and-decision-tree-basic.html#regression-tree"><i class="fa fa-check"></i><b>11.4.1</b> Regression Tree<span></span></a></li>
<li class="chapter" data-level="11.4.2" data-path="regression-and-decision-tree-basic.html"><a href="regression-and-decision-tree-basic.html#decision-tree"><i class="fa fa-check"></i><b>11.4.2</b> Decision Tree<span></span></a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="bagging-tree-1.html"><a href="bagging-tree-1.html"><i class="fa fa-check"></i><b>11.5</b> Bagging Tree<span></span></a></li>
<li class="chapter" data-level="11.6" data-path="random-forest.html"><a href="random-forest.html"><i class="fa fa-check"></i><b>11.6</b> Random Forest<span></span></a></li>
<li class="chapter" data-level="11.7" data-path="gradient-boosted-machine.html"><a href="gradient-boosted-machine.html"><i class="fa fa-check"></i><b>11.7</b> Gradient Boosted Machine<span></span></a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="gradient-boosted-machine.html"><a href="gradient-boosted-machine.html#adaptive-boosting"><i class="fa fa-check"></i><b>11.7.1</b> Adaptive Boosting<span></span></a></li>
<li class="chapter" data-level="11.7.2" data-path="gradient-boosted-machine.html"><a href="gradient-boosted-machine.html#stochastic-gradient-boosting"><i class="fa fa-check"></i><b>11.7.2</b> Stochastic Gradient Boosting<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="deeplearning.html"><a href="deeplearning.html"><i class="fa fa-check"></i><b>12</b> Deep Learning<span></span></a>
<ul>
<li class="chapter" data-level="12.1" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html"><i class="fa fa-check"></i><b>12.1</b> Feedforward Neural Network<span></span></a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#logisticregasneuralnetwork"><i class="fa fa-check"></i><b>12.1.1</b> Logistic Regression as Neural Network<span></span></a></li>
<li class="chapter" data-level="12.1.2" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#stochastic-gradient-descent"><i class="fa fa-check"></i><b>12.1.2</b> Stochastic Gradient Descent<span></span></a></li>
<li class="chapter" data-level="12.1.3" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#deepneuralnetwork"><i class="fa fa-check"></i><b>12.1.3</b> Deep Neural Network<span></span></a></li>
<li class="chapter" data-level="12.1.4" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#activationfunction"><i class="fa fa-check"></i><b>12.1.4</b> Activation Function<span></span></a></li>
<li class="chapter" data-level="12.1.5" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#optimization"><i class="fa fa-check"></i><b>12.1.5</b> Optimization<span></span></a></li>
<li class="chapter" data-level="12.1.6" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#deal-with-overfitting"><i class="fa fa-check"></i><b>12.1.6</b> Deal with Overfitting<span></span></a></li>
<li class="chapter" data-level="12.1.7" data-path="feedforward-neural-network.html"><a href="feedforward-neural-network.html#ffnnexample"><i class="fa fa-check"></i><b>12.1.7</b> Image Recognition Using FFNN<span></span></a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="convolutional-neural-network.html"><a href="convolutional-neural-network.html"><i class="fa fa-check"></i><b>12.2</b> Convolutional Neural Network<span></span></a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="convolutional-neural-network.html"><a href="convolutional-neural-network.html#convolution-layer"><i class="fa fa-check"></i><b>12.2.1</b> Convolution Layer<span></span></a></li>
<li class="chapter" data-level="12.2.2" data-path="convolutional-neural-network.html"><a href="convolutional-neural-network.html#padding-layer"><i class="fa fa-check"></i><b>12.2.2</b> Padding Layer<span></span></a></li>
<li class="chapter" data-level="12.2.3" data-path="convolutional-neural-network.html"><a href="convolutional-neural-network.html#pooling-layer"><i class="fa fa-check"></i><b>12.2.3</b> Pooling Layer<span></span></a></li>
<li class="chapter" data-level="12.2.4" data-path="convolutional-neural-network.html"><a href="convolutional-neural-network.html#convolution-over-volume"><i class="fa fa-check"></i><b>12.2.4</b> Convolution Over Volume<span></span></a></li>
<li class="chapter" data-level="12.2.5" data-path="convolutional-neural-network.html"><a href="convolutional-neural-network.html#cnnexample"><i class="fa fa-check"></i><b>12.2.5</b> Image Recognition Using CNN<span></span></a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="recurrent-neural-network.html"><a href="recurrent-neural-network.html"><i class="fa fa-check"></i><b>12.3</b> Recurrent Neural Network<span></span></a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="recurrent-neural-network.html"><a href="recurrent-neural-network.html#rnn-model"><i class="fa fa-check"></i><b>12.3.1</b> RNN Model<span></span></a></li>
<li class="chapter" data-level="12.3.2" data-path="recurrent-neural-network.html"><a href="recurrent-neural-network.html#lstm"><i class="fa fa-check"></i><b>12.3.2</b> Long Short Term Memory<span></span></a></li>
<li class="chapter" data-level="12.3.3" data-path="recurrent-neural-network.html"><a href="recurrent-neural-network.html#embedding"><i class="fa fa-check"></i><b>12.3.3</b> Word Embedding<span></span></a></li>
<li class="chapter" data-level="12.3.4" data-path="recurrent-neural-network.html"><a href="recurrent-neural-network.html#rnnexample"><i class="fa fa-check"></i><b>12.3.4</b> Sentiment Analysis Using RNN<span></span></a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix<span></span></b></span></li>
<li class="chapter" data-level="A" data-path="largelocaldata.html"><a href="largelocaldata.html"><i class="fa fa-check"></i><b>A</b> Handling Large Local Data<span></span></a>
<ul>
<li class="chapter" data-level="A.1" data-path="readr.html"><a href="readr.html"><i class="fa fa-check"></i><b>A.1</b> <code>readr</code><span></span></a></li>
<li class="chapter" data-level="A.2" data-path="data.table-enhanced-data.html"><a href="data.table-enhanced-data.html"><i class="fa fa-check"></i><b>A.2</b> <code>data.table</code>— enhanced <code>data.frame</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="r-code-for-data-simulation.html"><a href="r-code-for-data-simulation.html"><i class="fa fa-check"></i><b>B</b> R code for data simulation<span></span></a>
<ul>
<li class="chapter" data-level="B.1" data-path="appendixdata1.html"><a href="appendixdata1.html"><i class="fa fa-check"></i><b>B.1</b> Customer Data for Clothing Company<span></span></a></li>
<li class="chapter" data-level="B.2" data-path="appendixdata3.html"><a href="appendixdata3.html"><i class="fa fa-check"></i><b>B.2</b> Swine Disease Breakout Data<span></span></a></li>
</ul></li>
<li><a href="references.html#references">References<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="summarize-data" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Summarize Data<a href="summarize-data.html#summarize-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="dplyr-package" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> <code>dplyr</code> package<a href="summarize-data.html#dplyr-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>dplyr</code> provides a flexible grammar of data manipulation focusing on tools for working with data frames (hence the <code>d</code> in the name). It is faster and more friendly:</p>
<ul>
<li>It identifies the most important data manipulations and make them easy to use from R.</li>
<li>It performs faster for in-memory data by writing key pieces in C++ using <code>Rcpp</code>.</li>
<li>The interface is the same for data frame, data table or database.</li>
</ul>
<p>We will illustrate the following functions in order using the clothing company data:</p>
<ol style="list-style-type: decimal">
<li>Display</li>
<li>Subset</li>
<li>Summarize</li>
<li>Create new variable</li>
<li>Merge</li>
</ol>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="summarize-data.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read data</span></span>
<span id="cb73-2"><a href="summarize-data.html#cb73-2" aria-hidden="true" tabindex="-1"></a>sim.dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;http://bit.ly/2P5gTw4&quot;</span>)</span></code></pre></div>
<div id="display" class="section level4 hasAnchor" number="6.1.1.1">
<h4><span class="header-section-number">6.1.1.1</span> Display<a href="summarize-data.html#display" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><code>tbl_df()</code>: Convert the data to <code>tibble</code> which offers better checking and printing capabilities than traditional data frames. It will adjust output width according to fit the current window.</li>
</ul>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="summarize-data.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tbl_df</span>(sim.dat)</span></code></pre></div>
<ul>
<li><code>glimpse()</code>: This is like a transposed version of <code>tbl_df()</code></li>
</ul>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="summarize-data.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(sim.dat)</span></code></pre></div>
</div>
<div id="subset" class="section level4 hasAnchor" number="6.1.1.2">
<h4><span class="header-section-number">6.1.1.2</span> Subset<a href="summarize-data.html#subset" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Get rows with <code>income</code> more than 300000:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="summarize-data.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(sim.dat, income <span class="sc">&gt;</span><span class="dv">300000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb76-2"><a href="summarize-data.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_df</span>()</span></code></pre></div>
<p>Here we use the operator <code>%&gt;%</code>. It is called a “pipe operator” which pipes a value forward into an expression or function call. What you get in the left operation will be the first argument or the only argument in the right operation.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="summarize-data.html#cb77-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">f</span>(y) <span class="ot">=</span> <span class="fu">f</span>(x, y)</span>
<span id="cb77-2"><a href="summarize-data.html#cb77-2" aria-hidden="true" tabindex="-1"></a>y <span class="sc">%&gt;%</span> <span class="fu">f</span>(x, ., z) <span class="ot">=</span> <span class="fu">f</span>(x, y, z )</span></code></pre></div>
<p>It is an operator from <code>magrittr</code> which can be really beneficial. The following R code is difficulty to read and understand without using the pipe operator.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="summarize-data.html#cb78-1" aria-hidden="true" tabindex="-1"></a>ave_exp <span class="ot">&lt;-</span> <span class="fu">filter</span>( </span>
<span id="cb78-2"><a href="summarize-data.html#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb78-3"><a href="summarize-data.html#cb78-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>( </span>
<span id="cb78-4"><a href="summarize-data.html#cb78-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(</span>
<span id="cb78-5"><a href="summarize-data.html#cb78-5" aria-hidden="true" tabindex="-1"></a>        sim.dat, </span>
<span id="cb78-6"><a href="summarize-data.html#cb78-6" aria-hidden="true" tabindex="-1"></a>        <span class="sc">!</span><span class="fu">is.na</span>(income)</span>
<span id="cb78-7"><a href="summarize-data.html#cb78-7" aria-hidden="true" tabindex="-1"></a>      ), </span>
<span id="cb78-8"><a href="summarize-data.html#cb78-8" aria-hidden="true" tabindex="-1"></a>      segment</span>
<span id="cb78-9"><a href="summarize-data.html#cb78-9" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb78-10"><a href="summarize-data.html#cb78-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">ave_online_exp =</span> <span class="fu">mean</span>(online_exp), </span>
<span id="cb78-11"><a href="summarize-data.html#cb78-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb78-12"><a href="summarize-data.html#cb78-12" aria-hidden="true" tabindex="-1"></a>  ), </span>
<span id="cb78-13"><a href="summarize-data.html#cb78-13" aria-hidden="true" tabindex="-1"></a>  n <span class="sc">&gt;</span> <span class="dv">200</span></span>
<span id="cb78-14"><a href="summarize-data.html#cb78-14" aria-hidden="true" tabindex="-1"></a>) </span></code></pre></div>
<p>The same function with pipe operator “<code>%&gt;%</code>”:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="summarize-data.html#cb79-1" aria-hidden="true" tabindex="-1"></a>ave_exp <span class="ot">&lt;-</span> sim.dat <span class="sc">%&gt;%</span> </span>
<span id="cb79-2"><a href="summarize-data.html#cb79-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(income)) <span class="sc">%&gt;%</span> </span>
<span id="cb79-3"><a href="summarize-data.html#cb79-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">group_by</span>(segment) <span class="sc">%&gt;%</span> </span>
<span id="cb79-4"><a href="summarize-data.html#cb79-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">summarise</span>( </span>
<span id="cb79-5"><a href="summarize-data.html#cb79-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">ave_online_exp =</span> <span class="fu">mean</span>(online_exp), </span>
<span id="cb79-6"><a href="summarize-data.html#cb79-6" aria-hidden="true" tabindex="-1"></a>   <span class="at">n =</span> <span class="fu">n</span>() ) <span class="sc">%&gt;%</span> </span>
<span id="cb79-7"><a href="summarize-data.html#cb79-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">200</span>)</span></code></pre></div>
<p>It is much easier to read:</p>
<ol style="list-style-type: decimal">
<li>Delete observations from <code>sim.dat</code> with missing income values</li>
<li>Group the data from step 1 by variable <code>segment</code></li>
<li>Calculate mean of online expense for each segment and save the result as a new variable named <code>ave_online_exp</code></li>
<li>Calculate the size of each segment and saved it as a new variable named <code>n</code></li>
<li>Get segments with size larger than 200</li>
</ol>
<p>You can use <code>distinct()</code> to delete duplicated rows.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="summarize-data.html#cb80-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">distinct</span>(sim.dat)</span></code></pre></div>
<p><code>sample_frac()</code> will randomly select some rows with a specified percentage. <code>sample_n()</code> can randomly select rows with a specified number.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="summarize-data.html#cb81-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">sample_frac</span>(sim.dat, <span class="fl">0.5</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>) </span>
<span id="cb81-2"><a href="summarize-data.html#cb81-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">sample_n</span>(sim.dat, <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<p><code>slice()</code> will select rows by position:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="summarize-data.html#cb82-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">slice</span>(sim.dat, <span class="dv">10</span><span class="sc">:</span><span class="dv">15</span>) </span></code></pre></div>
<p>It is equivalent to <code>sim.dat[10:15,]</code>.</p>
<p><code>top_n()</code> will select the order top n entries:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="summarize-data.html#cb83-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">top_n</span>(sim.dat,<span class="dv">2</span>,income)</span></code></pre></div>
<p>If you want to select columns instead of rows, you can use <code>select()</code>. The following are some sample codes:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="summarize-data.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select by column name</span></span>
<span id="cb84-2"><a href="summarize-data.html#cb84-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(sim.dat,income,age,store_exp)</span>
<span id="cb84-3"><a href="summarize-data.html#cb84-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-4"><a href="summarize-data.html#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="co"># select columns whose name contains a character string</span></span>
<span id="cb84-5"><a href="summarize-data.html#cb84-5" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(sim.dat, <span class="fu">contains</span>(<span class="st">&quot;_&quot;</span>))</span>
<span id="cb84-6"><a href="summarize-data.html#cb84-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-7"><a href="summarize-data.html#cb84-7" aria-hidden="true" tabindex="-1"></a><span class="co"># select columns whose name ends with a character string</span></span>
<span id="cb84-8"><a href="summarize-data.html#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="co"># similar there is &quot;starts_with&quot;</span></span>
<span id="cb84-9"><a href="summarize-data.html#cb84-9" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(sim.dat, <span class="fu">ends_with</span>(<span class="st">&quot;e&quot;</span>))</span>
<span id="cb84-10"><a href="summarize-data.html#cb84-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-11"><a href="summarize-data.html#cb84-11" aria-hidden="true" tabindex="-1"></a><span class="co"># select columns Q1,Q2,Q3,Q4 and Q5</span></span>
<span id="cb84-12"><a href="summarize-data.html#cb84-12" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(sim.dat, <span class="fu">num_range</span>(<span class="st">&quot;Q&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) </span>
<span id="cb84-13"><a href="summarize-data.html#cb84-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-14"><a href="summarize-data.html#cb84-14" aria-hidden="true" tabindex="-1"></a><span class="co"># select columns whose names are in a group of names</span></span>
<span id="cb84-15"><a href="summarize-data.html#cb84-15" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(sim.dat, <span class="fu">one_of</span>(<span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;income&quot;</span>)))</span>
<span id="cb84-16"><a href="summarize-data.html#cb84-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-17"><a href="summarize-data.html#cb84-17" aria-hidden="true" tabindex="-1"></a><span class="co"># select columns between age and online_exp</span></span>
<span id="cb84-18"><a href="summarize-data.html#cb84-18" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(sim.dat, age<span class="sc">:</span>online_exp)</span>
<span id="cb84-19"><a href="summarize-data.html#cb84-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-20"><a href="summarize-data.html#cb84-20" aria-hidden="true" tabindex="-1"></a><span class="co"># select all columns except for age</span></span>
<span id="cb84-21"><a href="summarize-data.html#cb84-21" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">select</span>(sim.dat, <span class="sc">-</span>age)</span></code></pre></div>
</div>
<div id="summarize" class="section level4 hasAnchor" number="6.1.1.3">
<h4><span class="header-section-number">6.1.1.3</span> Summarize<a href="summarize-data.html#summarize" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let us use a standard marketing problem, customer segmentation, to illustrate how to summarize data. It usually starts with designing survey and collecting data. Then run a cluster analysis on the data to get customer segments. Once we have different segments, the next is to understand how each group of customer look like by summarizing some key metrics. For example, we can do the following data aggregation for different segments of clothes customers.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="summarize-data.html#cb85-1" aria-hidden="true" tabindex="-1"></a>dat_summary <span class="ot">&lt;-</span> sim.dat <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="summarize-data.html#cb85-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(segment) <span class="sc">%&gt;%</span> </span>
<span id="cb85-3"><a href="summarize-data.html#cb85-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">Age =</span> <span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">na.omit</span>(age)), <span class="dv">0</span>), </span>
<span id="cb85-4"><a href="summarize-data.html#cb85-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">FemalePct =</span> <span class="fu">round</span>(<span class="fu">mean</span>(gender <span class="sc">==</span> <span class="st">&quot;Female&quot;</span>), <span class="dv">2</span>), </span>
<span id="cb85-5"><a href="summarize-data.html#cb85-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">HouseYes =</span> <span class="fu">round</span>(<span class="fu">mean</span>(house <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>), <span class="dv">2</span>), </span>
<span id="cb85-6"><a href="summarize-data.html#cb85-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">store_exp =</span> <span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">na.omit</span>(store_exp), </span>
<span id="cb85-7"><a href="summarize-data.html#cb85-7" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">trim =</span> <span class="fl">0.1</span>), <span class="dv">0</span>),</span>
<span id="cb85-8"><a href="summarize-data.html#cb85-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">online_exp =</span> <span class="fu">round</span>(<span class="fu">mean</span>(online_exp), <span class="dv">0</span>), </span>
<span id="cb85-9"><a href="summarize-data.html#cb85-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">store_trans =</span> <span class="fu">round</span>(<span class="fu">mean</span>(store_trans), <span class="dv">1</span>), </span>
<span id="cb85-10"><a href="summarize-data.html#cb85-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">online_trans =</span> <span class="fu">round</span>(<span class="fu">mean</span>(online_trans), <span class="dv">1</span>))</span>
<span id="cb85-11"><a href="summarize-data.html#cb85-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-12"><a href="summarize-data.html#cb85-12" aria-hidden="true" tabindex="-1"></a><span class="co"># transpose the data frame for showing purpose</span></span>
<span id="cb85-13"><a href="summarize-data.html#cb85-13" aria-hidden="true" tabindex="-1"></a><span class="co"># due to the limit of output width</span></span>
<span id="cb85-14"><a href="summarize-data.html#cb85-14" aria-hidden="true" tabindex="-1"></a>cnames <span class="ot">&lt;-</span> dat_summary<span class="sc">$</span>segment</span>
<span id="cb85-15"><a href="summarize-data.html#cb85-15" aria-hidden="true" tabindex="-1"></a>dat_summary <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(dat_summary, <span class="sc">-</span> segment)</span>
<span id="cb85-16"><a href="summarize-data.html#cb85-16" aria-hidden="true" tabindex="-1"></a>tdat_summary <span class="ot">&lt;-</span> <span class="fu">t</span>(dat_summary) <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()</span>
<span id="cb85-17"><a href="summarize-data.html#cb85-17" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(tdat_summary) <span class="ot">&lt;-</span> cnames</span>
<span id="cb85-18"><a href="summarize-data.html#cb85-18" aria-hidden="true" tabindex="-1"></a>tdat_summary</span></code></pre></div>
<pre><code>##              Conspicuous  Price Quality   Style
## Age                42.00  60.00   35.00   24.00
## FemalePct           0.32   0.45    0.47    0.81
## HouseYes            0.86   0.94    0.34    0.27
## store_exp        4990.00 501.00  301.00  200.00
## online_exp       4898.00 205.00 2013.00 1962.00
## store_trans        10.90   6.10    2.90    3.00
## online_trans       11.10   3.00   16.00   21.10</code></pre>
<p>Now, let’s look at the code in more details.</p>
<p>The first line <code>sim.dat</code> is easy. It is the data you want to work on. The second line <code>group_by(segment)</code> tells R that in the following steps you want to summarise by variable <code>segment</code>. Here we only summarize data by one categorical variable, but you can group by multiple variables, such as <code>group_by(segment, house)</code>. The third argument <code>summarise</code> tells R the manipulation(s) to do. Then list the exact actions inside <code>summarise()</code>. For example, <code>Age = round(mean(na.omit(age)),0)</code> tell R the following things:</p>
<ol style="list-style-type: decimal">
<li>Calculate the mean of column <code>age</code> ignoring missing value for each customer segment</li>
<li>Round the result to the specified number of decimal places</li>
<li>Store the result in a new variable named <code>Age</code></li>
</ol>
<p>The rest of the command above is similar. In the end, we calculate the following for each segment:</p>
<ol style="list-style-type: decimal">
<li><code>Age</code>: average age for each segment</li>
<li><code>FemalePct</code>: percentage for each segment</li>
<li><code>HouseYes</code>: percentage of people who own a house</li>
<li><code>stroe_exp</code>: average expense in store</li>
<li><code>online_exp</code>: average expense online</li>
<li><code>store_trans</code>: average times of transactions in the store</li>
<li><code>online_trans</code>: average times of online transactions</li>
</ol>
<p>There is a lot of information you can extract from those simple averages.</p>
<ul>
<li><p>Conspicuous: average age is about 40. It is a group of middle-age wealthy people. 1/3 of them are female, and 2/3 are male. They buy regardless the price. Almost all of them own house (0.86).</p></li>
<li><p>Price: They are older people with average age 60. Nearly all of them own a house (0.94). They are less likely to purchase online (<code>store_trans = 6</code> while <code>online_trans = 3</code>). It is the only group that is less likely to buy online.</p></li>
<li><p>Quality: The average age is 35. They are not way different with Conspicuous regarding age. But they spend much less. The percentages of male and female are similar. They prefer online shopping. More than half of them don’t own a house (0.66).</p></li>
<li><p>Style: They are young people with average age 24. The majority of them are female (0.81). Most of them don’t own a house (0.73). They are very likely to be digital natives and prefer online shopping.</p></li>
</ul>
<p>You may notice that Style group purchase more frequently online (<code>online_trans</code>) but the expense (<code>online_exp</code>) is not higher. It makes us wonder what is the average expense each time, so you have a better idea about the price range of the group.</p>
<p>The analytical process is aggregated instead of independent steps. The current step will shed new light on what to do next. Sometimes you need to go back to fix something in the previous steps. Let’s check average one-time online and instore purchase amounts:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="summarize-data.html#cb87-1" aria-hidden="true" tabindex="-1"></a>sim.dat <span class="sc">%&gt;%</span> </span>
<span id="cb87-2"><a href="summarize-data.html#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(segment) <span class="sc">%&gt;%</span> </span>
<span id="cb87-3"><a href="summarize-data.html#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_online =</span> <span class="fu">round</span>(<span class="fu">sum</span>(online_exp)<span class="sc">/</span><span class="fu">sum</span>(online_trans), <span class="dv">2</span>),</span>
<span id="cb87-4"><a href="summarize-data.html#cb87-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">avg_store =</span> <span class="fu">round</span>(<span class="fu">sum</span>(store_exp)<span class="sc">/</span><span class="fu">sum</span>(store_trans), <span class="dv">2</span>))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   segment     avg_online avg_store
##   &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt;
## 1 Conspicuous      442.      479. 
## 2 Price             69.3      81.3
## 3 Quality          126.      105. 
## 4 Style             92.8     121.</code></pre>
<p>Price group has the lowest averaged one-time purchase. The Conspicuous group will pay the highest price. When we build customer profile in real life, we will also need to look at the survey summarization. You may be surprised how much information simple data manipulations can provide.</p>
<p>Another comman task is to check which column has missing values. It requires the program to look at each column in the data. In this case you can use <code>summarise_all</code>:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="summarize-data.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># apply function anyNA() to each column</span></span>
<span id="cb89-2"><a href="summarize-data.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="co"># you can also assign a function vector </span></span>
<span id="cb89-3"><a href="summarize-data.html#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="co"># such as: c(&quot;anyNA&quot;,&quot;is.factor&quot;)</span></span>
<span id="cb89-4"><a href="summarize-data.html#cb89-4" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">summarise_all</span>(sim.dat, <span class="fu">funs_</span>(<span class="fu">c</span>(<span class="st">&quot;anyNA&quot;</span>)))</span></code></pre></div>
<pre><code>##     age gender income house store_exp online_exp
## 1 FALSE  FALSE   TRUE FALSE     FALSE      FALSE
##   store_trans online_trans    Q1    Q2    Q3    Q4
## 1       FALSE        FALSE FALSE FALSE FALSE FALSE
##      Q5    Q6    Q7    Q8    Q9   Q10 segment
## 1 FALSE FALSE FALSE FALSE FALSE FALSE   FALSE</code></pre>
<p>The above code returns a vector indicating if there is any value missing in each column.</p>
</div>
<div id="create-new-variable" class="section level4 hasAnchor" number="6.1.1.4">
<h4><span class="header-section-number">6.1.1.4</span> Create new variable<a href="summarize-data.html#create-new-variable" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are often situations where you need to create new variables. For example, adding online and store expense to get total expense. In this case, you will apply a function to the columns and return a column with the same length. <code>mutate()</code> can do it for you and append one or more new columns:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="summarize-data.html#cb91-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">mutate</span>(sim.dat, <span class="at">total_exp =</span> store_exp <span class="sc">+</span> online_exp)</span></code></pre></div>
<p>The above code sums up two columns and appends the result (<code>total_exp</code>) to <code>sim.dat</code>. Another similar function is <code>transmute()</code>. The difference is that <code>transmute()</code> will delete the original columns and only keep the new ones.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="summarize-data.html#cb92-1" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">transmute</span>(sim.dat, <span class="at">total_exp =</span> store_exp <span class="sc">+</span> online_exp)</span></code></pre></div>
</div>
<div id="merge" class="section level4 hasAnchor" number="6.1.1.5">
<h4><span class="header-section-number">6.1.1.5</span> Merge<a href="summarize-data.html#merge" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Similar to SQL, there are different joins in <code>dplyr</code>. We create two baby data sets to show how the functions work.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="summarize-data.html#cb93-1" aria-hidden="true" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(<span class="at">ID =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="at">x1 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))))</span></code></pre></div>
<pre><code>##   ID x1
## 1  A  1
## 2  B  2
## 3  C  3</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="summarize-data.html#cb95-1" aria-hidden="true" tabindex="-1"></a>(y <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(<span class="at">ID =</span> <span class="fu">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>), <span class="at">y1 =</span> <span class="fu">c</span>(T, T, F))))</span></code></pre></div>
<pre><code>##   ID    y1
## 1  B  TRUE
## 2  C  TRUE
## 3  D FALSE</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="summarize-data.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># join to the left</span></span>
<span id="cb97-2"><a href="summarize-data.html#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="co"># keep all rows in x</span></span>
<span id="cb97-3"><a href="summarize-data.html#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(x, y, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<pre><code>##   ID x1   y1
## 1  A  1 &lt;NA&gt;
## 2  B  2 TRUE
## 3  C  3 TRUE</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="summarize-data.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get rows matched in both data sets</span></span>
<span id="cb99-2"><a href="summarize-data.html#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(x, y, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<pre><code>##   ID x1   y1
## 1  B  2 TRUE
## 2  C  3 TRUE</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="summarize-data.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get rows in either data set</span></span>
<span id="cb101-2"><a href="summarize-data.html#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(x, y, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<pre><code>##   ID   x1    y1
## 1  A    1  &lt;NA&gt;
## 2  B    2  TRUE
## 3  C    3  TRUE
## 4  D &lt;NA&gt; FALSE</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="summarize-data.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter out rows in x that can be matched in y </span></span>
<span id="cb103-2"><a href="summarize-data.html#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="co"># it doesn&#39;t bring in any values from y </span></span>
<span id="cb103-3"><a href="summarize-data.html#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">semi_join</span>(x, y, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="summarize-data.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the opposite of  semi_join()</span></span>
<span id="cb104-2"><a href="summarize-data.html#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="co"># it gets rows in x that cannot be matched in y</span></span>
<span id="cb104-3"><a href="summarize-data.html#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="co"># it doesn&#39;t bring in any values from y</span></span>
<span id="cb104-4"><a href="summarize-data.html#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(x, y, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<p>There are other functions (<code>intersect()</code>, <code>union()</code> and <code>setdiff()</code>). Also the data frame version of <code>rbind</code> and <code>cbind</code> which are <code>bind_rows()</code> and <code>bind_col()</code>. We are not going to go through them all. You can try them yourself. If you understand the functions we introduced so far. It should be easy for you to figure out the rest.</p>
</div>
</div>
<div id="applyfamilyinbaser" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> <code>apply()</code>, <code>lapply()</code> and <code>sapply()</code> in base R<a href="summarize-data.html#applyfamilyinbaser" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are some powerful functions to summarize data in base R, such as <code>apply()</code>, <code>lapply()</code> and <code>sapply()</code>. They do the same basic things and are all from “apply” family: apply functions over parts of data. They differ in two important respects:</p>
<ol style="list-style-type: decimal">
<li>the type of object they apply to</li>
<li>the type of result they will return</li>
</ol>
<p>When do we use <code>apply()</code>? When we want to apply a function to margins of an array or matrix. That means our data need to be structured. The operations can be very flexible. It returns a vector or array or list of values obtained by applying a function to margins of an array or matrix.</p>
<p>For example you can compute row and column sums for a matrix:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="summarize-data.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="do">## simulate a matrix</span></span>
<span id="cb105-2"><a href="summarize-data.html#cb105-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="at">x1 =</span><span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">x2 =</span> <span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb105-3"><a href="summarize-data.html#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(x)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>]</span>
<span id="cb105-4"><a href="summarize-data.html#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>##  x1  x2 
## 4.5 3.0</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="summarize-data.html#cb107-1" aria-hidden="true" tabindex="-1"></a>col.sums <span class="ot">&lt;-</span> <span class="fu">apply</span>(x, <span class="dv">2</span>, sum)</span>
<span id="cb107-2"><a href="summarize-data.html#cb107-2" aria-hidden="true" tabindex="-1"></a>row.sums <span class="ot">&lt;-</span> <span class="fu">apply</span>(x, <span class="dv">1</span>, sum)</span></code></pre></div>
<p>You can also apply other functions:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="summarize-data.html#cb108-1" aria-hidden="true" tabindex="-1"></a>ma <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>), <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb108-2"><a href="summarize-data.html#cb108-2" aria-hidden="true" tabindex="-1"></a>ma</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    3    1    7
## [2,]    2    4    6    8</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="summarize-data.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(ma, <span class="dv">1</span>, table)  <span class="co">#--&gt; a list of length 2</span></span></code></pre></div>
<pre><code>## [[1]]
## 
## 1 3 7 
## 2 1 1 
## 
## [[2]]
## 
## 2 4 6 8 
## 1 1 1 1</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="summarize-data.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(ma, <span class="dv">1</span>, stats<span class="sc">::</span>quantile) <span class="co"># 5 x n matrix with rownames</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## 0%      1  2.0
## 25%     1  3.5
## 50%     2  5.0
## 75%     4  6.5
## 100%    7  8.0</code></pre>
<p>Results can have different lengths for each call. This is a trickier example. What will you get?</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="summarize-data.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Example with different lengths for each call</span></span>
<span id="cb114-2"><a href="summarize-data.html#cb114-2" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>, <span class="at">dim =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb114-3"><a href="summarize-data.html#cb114-3" aria-hidden="true" tabindex="-1"></a>zseq <span class="ot">&lt;-</span> <span class="fu">apply</span>(z, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">seq_len</span>(<span class="fu">max</span>(x)))</span>
<span id="cb114-4"><a href="summarize-data.html#cb114-4" aria-hidden="true" tabindex="-1"></a>zseq         <span class="do">## a 2 x 3 matrix</span></span>
<span id="cb114-5"><a href="summarize-data.html#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(zseq) <span class="do">## list</span></span>
<span id="cb114-6"><a href="summarize-data.html#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(zseq) <span class="do">## 2 3</span></span>
<span id="cb114-7"><a href="summarize-data.html#cb114-7" aria-hidden="true" tabindex="-1"></a>zseq[<span class="dv">1</span>,]</span>
<span id="cb114-8"><a href="summarize-data.html#cb114-8" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(z, <span class="dv">3</span>, <span class="cf">function</span>(x) <span class="fu">seq_len</span>(<span class="fu">max</span>(x)))</span></code></pre></div>
<ul>
<li><code>lapply()</code> applies a function over a list, data.frame or vector and returns a list of the same length.</li>
<li><code>sapply()</code> is a user-friendly version and wrapper of <code>lapply()</code>. By default it returns a vector, matrix or if <code>simplify = "array"</code>, an array if appropriate. <code>apply(x, f, simplify = FALSE, USE.NAMES = FALSE)</code> is the same as <code>lapply(x, f)</code>. If <code>simplify=TRUE</code>, then it will return a <code>data.frame</code> instead of <code>list</code>.</li>
</ul>
<p>Let’s use some data with context to help you better understand the functions.</p>
<ul>
<li>Get the mean and standard deviation of all numerical variables in the dataset.</li>
</ul>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="summarize-data.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get numerical variables</span></span>
<span id="cb115-2"><a href="summarize-data.html#cb115-2" aria-hidden="true" tabindex="-1"></a>sdat <span class="ot">&lt;-</span> sim.dat[, <span class="fu">lapply</span>(sim.dat, class) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;integer&quot;</span>, <span class="st">&quot;numeric&quot;</span>)]</span>
<span id="cb115-3"><a href="summarize-data.html#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Try the following code with apply() function apply(sim.dat,2,class)</span></span>
<span id="cb115-4"><a href="summarize-data.html#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="do">## What is the problem?</span></span></code></pre></div>
<p>The data frame <code>sdat</code> only includes numeric columns. Now we can go head and use <code>apply()</code> to get mean and standard deviation for each column:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="summarize-data.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(sdat, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">mean</span>(<span class="fu">na.omit</span>(x)))</span></code></pre></div>
<pre><code>##          age       income    store_exp   online_exp 
##    3.884e+01    1.135e+05    1.357e+03    2.120e+03 
##  store_trans online_trans           Q1           Q2 
##    5.350e+00    1.355e+01    3.101e+00    1.823e+00 
##           Q3           Q4           Q5           Q6 
##    1.992e+00    2.763e+00    2.945e+00    2.448e+00 
##           Q7           Q8           Q9          Q10 
##    3.434e+00    2.396e+00    3.085e+00    2.320e+00</code></pre>
<p>Here we defined a function using <code>function(x) mean(na.omit(x))</code>. It is a very simple function. It tells R to ignore the missing value when calculating the mean. <code>MARGIN = 2</code> tells R to apply the function to each column. It is not hard to guess what <code>MARGIN = 1</code> mean. The result show that the average online expense is much higher than store expense. You can also compare the average scores across different questions. The command to calculate standard deviation is very similar. The only difference is to change <code>mean()</code> to <code>sd()</code>:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="summarize-data.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(sdat, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="fu">sd</span>(<span class="fu">na.omit</span>(x)))</span></code></pre></div>
<pre><code>##          age       income    store_exp   online_exp 
##       16.417    49842.287     2774.400     1731.224 
##  store_trans online_trans           Q1           Q2 
##        3.696        7.957        1.450        1.168 
##           Q3           Q4           Q5           Q6 
##        1.402        1.155        1.284        1.439 
##           Q7           Q8           Q9          Q10 
##        1.456        1.154        1.118        1.136</code></pre>
<p>Even the average online expense is higher than store expense, the standard deviation for store expense is much higher than online expense which indicates there is very likely some big/small purchase in store. We can check it quickly:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="summarize-data.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(sdat<span class="sc">$</span>store_exp)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    -500     205     329    1357     597   50000</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="summarize-data.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(sdat<span class="sc">$</span>online_exp)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##      69     420    1942    2120    2441    9479</code></pre>
<p>There are some odd values in store expense. The minimum value is -500 which indicates that you should preprocess data before analyzing it. Checking those simple statistics will help you better understand your data. It then gives you some idea how to preprocess and analyze them. How about using <code>lapply()</code> and <code>sapply()</code>?</p>
<p>Run the following code and compare the results:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="summarize-data.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(sdat, <span class="cf">function</span>(x) <span class="fu">sd</span>(<span class="fu">na.omit</span>(x)))</span>
<span id="cb124-2"><a href="summarize-data.html#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(sdat, <span class="cf">function</span>(x) <span class="fu">sd</span>(<span class="fu">na.omit</span>(x)))</span>
<span id="cb124-3"><a href="summarize-data.html#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(sdat, <span class="cf">function</span>(x) <span class="fu">sd</span>(<span class="fu">na.omit</span>(x)), <span class="at">simplify =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="datawrangline.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidy-and-reshape-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/happyrabbit/IntroDataScience/06-DataWrangling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["IDS.pdf", "IDS.epub", "IDS.mobi"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
