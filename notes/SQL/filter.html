<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>SQL for Data Science</title>
  <meta name="description" content="This is my notes on Unix">
  <meta name="generator" content="bookdown 0.4 and GitBook 2.6.7">

  <meta property="og:title" content="SQL for Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is my notes on Unix" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="SQL for Data Science" />
  
  <meta name="twitter:description" content="This is my notes on Unix" />
  

<meta name="author" content="Hui Lin">


<meta name="date" content="2018-01-26">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="filtering-sorting-and-calculating-data-with-sql.html">
<link rel="next" href="sort.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Statement</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a><ul>
<li class="chapter" data-level="1.1" data-path="what-is-sql.html"><a href="what-is-sql.html"><i class="fa fa-check"></i><b>1.1</b> What is SQL?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-models-and-diagrams.html"><a href="data-models-and-diagrams.html"><i class="fa fa-check"></i><b>2</b> Data Models and Diagrams</a><ul>
<li class="chapter" data-level="2.1" data-path="think-before-code.html"><a href="think-before-code.html"><i class="fa fa-check"></i><b>2.1</b> Think Before Code</a></li>
<li class="chapter" data-level="2.2" data-path="what-is-data-model.html"><a href="what-is-data-model.html"><i class="fa fa-check"></i><b>2.2</b> What is Data Model?</a></li>
<li class="chapter" data-level="2.3" data-path="retrive-data-with-select.html"><a href="retrive-data-with-select.html"><i class="fa fa-check"></i><b>2.3</b> Retrive Data with <code>SELECT</code></a></li>
<li class="chapter" data-level="2.4" data-path="create-table.html"><a href="create-table.html"><i class="fa fa-check"></i><b>2.4</b> Create Table</a></li>
<li class="chapter" data-level="2.5" data-path="sql-comments.html"><a href="sql-comments.html"><i class="fa fa-check"></i><b>2.5</b> SQL Comments</a></li>
<li class="chapter" data-level="2.6" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>2.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="filtering-sorting-and-calculating-data-with-sql.html"><a href="filtering-sorting-and-calculating-data-with-sql.html"><i class="fa fa-check"></i><b>3</b> Filtering, Sorting, and Calculating Data with SQL</a><ul>
<li class="chapter" data-level="3.1" data-path="filter.html"><a href="filter.html"><i class="fa fa-check"></i><b>3.1</b> Filter</a><ul>
<li class="chapter" data-level="3.1.1" data-path="filter.html"><a href="filter.html#where"><i class="fa fa-check"></i><b>3.1.1</b> <code>WHERE</code></a></li>
<li class="chapter" data-level="3.1.2" data-path="filter.html"><a href="filter.html#in-or-and-not"><i class="fa fa-check"></i><b>3.1.2</b> <code>IN</code>, <code>OR</code> and <code>NOT</code></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="sort.html"><a href="sort.html"><i class="fa fa-check"></i><b>3.2</b> Sort</a></li>
<li class="chapter" data-level="3.3" data-path="math-operations.html"><a href="math-operations.html"><i class="fa fa-check"></i><b>3.3</b> Math Operations</a></li>
<li class="chapter" data-level="3.4" data-path="aggregrate-functions.html"><a href="aggregrate-functions.html"><i class="fa fa-check"></i><b>3.4</b> Aggregrate Functions</a></li>
<li class="chapter" data-level="3.5" data-path="group-data.html"><a href="group-data.html"><i class="fa fa-check"></i><b>3.5</b> Group Data</a></li>
<li class="chapter" data-level="3.6" data-path="summary-1.html"><a href="summary-1.html"><i class="fa fa-check"></i><b>3.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="subqueries-and-joins.html"><a href="subqueries-and-joins.html"><i class="fa fa-check"></i><b>4</b> Subqueries and Joins</a><ul>
<li class="chapter" data-level="4.1" data-path="subqueries.html"><a href="subqueries.html"><i class="fa fa-check"></i><b>4.1</b> Subqueries</a></li>
<li class="chapter" data-level="4.2" data-path="joins.html"><a href="joins.html"><i class="fa fa-check"></i><b>4.2</b> Joins</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="modifying-and-analyzing-data-with-sql.html"><a href="modifying-and-analyzing-data-with-sql.html"><i class="fa fa-check"></i><b>5</b> Modifying and Analyzing Data with SQL</a><ul>
<li class="chapter" data-level="5.1" data-path="text-strings.html"><a href="text-strings.html"><i class="fa fa-check"></i><b>5.1</b> Text Strings</a></li>
<li class="chapter" data-level="5.2" data-path="date-and-time-strings.html"><a href="date-and-time-strings.html"><i class="fa fa-check"></i><b>5.2</b> Date and Time Strings</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">SQL for Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="filter" class="section level2">
<h2><span class="header-section-number">3.1</span> Filter</h2>
<div id="where" class="section level3">
<h3><span class="header-section-number">3.1.1</span> <code>WHERE</code></h3>
<!-- Summary
Now that you've began writing your first SQL statements, you're probably really starting to see just how much data you can pull down from databases. So far what you've been experimenting with only has been a few thousand records, but many databases have a lot more data in them. Someday you might work with databases with the millions or even tens of millions of records in it. It almost boggles the mind, right? Well clearly, we're never going to want to look at all of that data at once. So thankfully, SQL gives us several methods to pair down and sort our data so we can quickly get the results we want. That's what we're going to discuss in this module. I'm going to introduce you to several methods for filtering data. At the end of this module, you'll know how to use several more clauses and operators including WHERE, BETWEEN, IN, OR, NOT, LIKE, ORDER BY, and GROUP BY. In addition, I'm going to tell you about wildcards which allow us to search for more specific or parts of record, including their disadvantages and advantages, and how we can best use these wildcards. We'll also discuss how to use some basic math operators as well as aggregate functions like, AVERAGE, COUNT, MIN, and MAX. And we'll start to begin analyzing our data. Obviously, this module's jam packed with new information. So let's not waste any more time, and go ahead and get started. -->
<p><strong>Learning Objectives</strong></p>
<ul>
<li>Describe the basics of filtering your data</li>
<li>Use the <code>WHERE</code> clause with common operators</li>
<li>Use <code>BETWEEN</code> clause</li>
<li>Explain the concept of a <code>NULL</code> value</li>
</ul>
<p>Filtering allows us to narrow the data we want to retrieve. Filtering is also used when you’re doing analysis to get very specific about the data you want to analyze as part of your model. To do this we use what’s called the <code>WHERE</code> clause. And the <code>WHERE</code> clause comes after <code>SELECT</code> and <code>FROM</code></p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> column_name, column_name
<span class="kw">FROM</span> table_name
<span class="kw">WHERE</span> column_name <span class="kw">operator</span> <span class="fu">value</span>;</code></pre></div>
<p>Here is a table of common operators:</p>
<table style="width:33%;">
<colgroup>
<col width="13%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>=</code></td>
<td>Equal</td>
</tr>
<tr class="even">
<td><code>&lt;&gt;</code></td>
<td>Not equal. Note: In some versions of SQL this operator may be written as <code>!=</code></td>
</tr>
<tr class="odd">
<td><code>&gt;</code></td>
<td>Greater than</td>
</tr>
<tr class="even">
<td><code>&lt;</code></td>
<td>Less than</td>
</tr>
<tr class="odd">
<td><code>&gt;=</code></td>
<td>Greater than or equal</td>
</tr>
<tr class="even">
<td><code>&lt;=</code></td>
<td>Less than or equal</td>
</tr>
<tr class="odd">
<td>BETWEEN</td>
<td>Between an inclusive range</td>
</tr>
<tr class="even">
<td>IS NULL</td>
<td>Is a null value</td>
</tr>
</tbody>
</table>
<p>Let’s look at some examples.</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> ProductName,
UnitPrice,
SupplierID
<span class="kw">FROM</span> Products
<span class="kw">WHERE</span> ProductName = <span class="st">&#39;Tofu&#39;</span>;</code></pre></div>
<p>In the above example, we filter on a single condition. We look at ProductName, UnitPrice and SupplierID for tofu. You can similarly look at products whose prices are greater than or equal to 75.</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> ProductName,
UnitPrice,
SupplierID
<span class="kw">FROM</span> Products
<span class="kw">WHERE</span> UnitPrice &gt;= <span class="dv">75</span>;</code></pre></div>
<p>Or you can filter out all records except one value:</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> ProductName,
UnitPrice,
SupplierID
<span class="kw">FROM</span> Products
<span class="kw">WHERE</span> ProductName &lt;&gt; <span class="st">&#39;Tofu&#39;</span>;</code></pre></div>
<p>You can filter for a range of values:</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> ProductName,
Unitprice,
SupplierID,
UnitsInStock,
<span class="kw">FROM</span> Products
<span class="kw">WHERE</span> UnitsInStock <span class="kw">BETWEEN</span> <span class="dv">15</span> <span class="kw">AND</span> <span class="dv">80</span>;</code></pre></div>
<p>You can filter <code>NULL</code> values by <code>IS NULL</code></p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> ProductName,
UnitPrice,
SupplierID,
UnitsInStock
<span class="kw">FROM</span> Products
<span class="kw">WHERE</span> ProductName <span class="kw">IS</span> <span class="kw">NULL</span>;</code></pre></div>
</div>
<div id="in-or-and-not" class="section level3">
<h3><span class="header-section-number">3.1.2</span> <code>IN</code>, <code>OR</code> and <code>NOT</code></h3>
<p><strong>Learning Objectives</strong></p>
<ul>
<li>Use the <code>IN</code> and <code>OR</code> operators to filter your data and get results you want</li>
<li>Differentiate between use of the <code>IN</code> and <code>BETWEEN</code> operators</li>
<li>Discuss importance of order of operations</li>
<li>Explain how and when to use the <code>NOT</code> operator</li>
</ul>
<p>Let’s start from<code>IN</code>. To use the IN operator, we need to specify a range of conditions or a set of values.</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span>
ProductID,
UnitPrice,
SupplierID
<span class="kw">FROM</span> Products
<span class="kw">WHERE</span> SupplierID <span class="kw">IN</span> (<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>);</code></pre></div>
<p>Another operator is the <code>OR</code> operator. An important thing to know about this is that a database management system will not evaluate the second condition in a <code>WHERE</code> clause if the first condition is met.</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span>
ProductName,
ProductID,
UnitPrice,
SupplierID,
ProductName
<span class="kw">FROM</span> Products
<span class="kw">WHERE</span> ProductName = <span class="st">&#39;Tofu&#39;</span> <span class="kw">OR</span> <span class="st">&#39;Konbu&#39;</span>;</code></pre></div>
<p>You can use <code>OR</code> with <code>AND</code>. There is somthing you need to pay extra attention. Look at the following two examples:</p>
<ul>
<li>Example1:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span>
ProductID,
UnitPrice,
SupplierID,
<span class="kw">FROM</span> Products
<span class="kw">WHERE</span> SupplierID = <span class="dv">9</span> <span class="kw">OR</span>
SupplierID = <span class="dv">11</span>
<span class="kw">AND</span> UnitPrice &gt; <span class="dv">15</span>;</code></pre></div>
<div class="figure">
<img src="images/ex1.png" style="width:40.0%" />

</div>
<ul>
<li>Example2:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span>
ProductID,
UnitPrice,
SupplierID
<span class="kw">FROM</span> Products
<span class="kw">WHERE</span> (SupplierID = <span class="dv">9</span> <span class="kw">OR</span>
SupplierID = <span class="dv">11</span>)
<span class="kw">AND</span> UnitPrice &gt; <span class="dv">15</span>;</code></pre></div>
<div class="figure">
<img src="images/ex2.png" style="width:40.0%" />

</div>
<p>Since SQL processes the <code>OR</code> before the <code>AND</code>, in example1, SQL will stop after processing <code>OR</code>, so it won’t even get to the operation after <code>AND</code>. In order to solve that, you need to use parentheses.</p>
<p>Even you don’t have to use a parenthesis, but it’s always really recommended. This way you’re not relying on the default order of operations.</p>
<p>You can use <code>NOT</code> to get the supplementary part:</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> *
<span class="kw">FROM</span> Employees
<span class="kw">WHERE</span> <span class="kw">NOT</span> City=<span class="st">&#39;London&#39;</span> <span class="kw">AND</span>
<span class="kw">NOT</span> City=<span class="st">&#39;Seattle&#39;</span>;</code></pre></div>
<p><strong>Wildcards</strong></p>
<p>Have you ever come across data where you knew either the beginning or end of something, but didn’t know the rest of it? Or maybe you know that something is like something else, but slightly different. In the rest of this section, we are going to discuss the use of the wildcards and the <code>LIKE</code> operator. You will learn the concept of wildcards, including their advantages and disadvantages.</p>
<p>Wildcard is a really powerful especially for string values or text data. A wildcard is a special character used to match parts of a value. You search for a pattern of string. <code>LIKE</code> works for both string and numerical variables. But wildcards cannot be used for numerical data.</p>
<p><strong><code>%</code> Wildcards</strong></p>
<table>
<thead>
<tr class="header">
<th>Wildcard</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>%carrot</code></td>
<td>Grab anything ending with the word <code>carrot</code></td>
</tr>
<tr class="even">
<td><code>carrot%</code></td>
<td>Grab anything after the word <code>carrot</code></td>
</tr>
<tr class="odd">
<td><code>%carrot%</code></td>
<td>Grab anything containing the word <code>carrot</code></td>
</tr>
<tr class="even">
<td><code>today%happy</code></td>
<td>Grab anything that starts with <code>today</code> and ends with <code>happy</code></td>
</tr>
<tr class="odd">
<td><code>t%@gmail.com</code></td>
<td>Grab gmail address that start with <code>t</code></td>
</tr>
</tbody>
</table>
<p>Underscore(<code>_</code>) wildcard matches a single character but it is not supported by DB2.</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">WHERE</span> <span class="kw">size</span> <span class="kw">LIKE</span> `_carrot`</code></pre></div>
<p>Output:</p>
<pre class="pre"><code>lcarrot
mcarrot
scarrot</code></pre>
<p>It is identical with:</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">WHERE</span> <span class="kw">size</span> <span class="kw">LIKE</span> `%carrot`</code></pre></div>
<p>Bracket (<code>[]</code>) wildcard specifies a set of characters in a specific location. It does not work with all DBMS. It does not work with SQLite.</p>
<p>There are some downsides to using wildcards:</p>
<ul>
<li>Takes longer to run</li>
<li>Better to use another operator (if possible) <code>=</code>,<code>&lt;</code>,<code>&gt;=</code> etc.</li>
<li>Depending on the system</li>
<li>Hard to read</li>
</ul>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="filtering-sorting-and-calculating-data-with-sql.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sort.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": ["SQL.pdf", "SQL.epub", "SQL.mobi"],
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
